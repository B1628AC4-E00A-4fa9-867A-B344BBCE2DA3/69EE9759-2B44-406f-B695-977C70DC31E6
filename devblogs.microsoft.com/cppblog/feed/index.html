<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>C++ Team Blog</title>
	<atom:link href="https://devblogs.microsoft.com/cppblog/feed/" rel="self" type="application/rss+xml" />
	<link>https://devblogs.microsoft.com/cppblog</link>
	<description>C++ tutorials, C and C++ news, and information about Visual Studio, Visual Studio Code, and Vcpkg from the Microsoft C++ team.</description>
	<lastBuildDate>Wed, 23 Jun 2021 15:08:51 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	

<image>
	<url>https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2018/10/Microsoft-Favicon.png</url>
	<title>C++ Team Blog</title>
	<link>https://devblogs.microsoft.com/cppblog</link>
	<width>32</width>
	<height>32</height>
</image> 
	<item>
		<title>STL Visualizers on GitHub</title>
		<link>https://devblogs.microsoft.com/cppblog/stl-visualizers-on-github/</link>
					<comments>https://devblogs.microsoft.com/cppblog/stl-visualizers-on-github/#comments</comments>
		
		<dc:creator><![CDATA[Anju Del Moral Gonzalez]]></dc:creator>
		<pubDate>Wed, 23 Jun 2021 15:06:37 +0000</pubDate>
				<category><![CDATA[Announcement]]></category>
		<category><![CDATA[C++]]></category>
		<guid isPermaLink="false">https://devblogs.microsoft.com/cppblog/?p=28219</guid>

					<description><![CDATA[<p>We are happy to announce that now it’s possible to contribute to the STL Visualizers for Visual Studio&#8217;s debugger on GitHub.<br />
A visualizer is a file with .natvis extension that allows you to manipulate the way native types appear in the debugger&#8217;s watch window. </p>
<p>The post <a rel="nofollow" href="https://devblogs.microsoft.com/cppblog/stl-visualizers-on-github/">STL Visualizers on GitHub</a> appeared first on <a rel="nofollow" href="https://devblogs.microsoft.com/cppblog">C++ Team Blog</a>.</p>
]]></description>
										<content:encoded><![CDATA[<p><span data-contrast="auto">We are happy to announce that now it’s possible to contribute to the STL Visualizers for Visual Studio&#8217;s debugger on <a href="https://github.com/microsoft/STL/blob/main/stl/debugger/STL.natvis">GitHub</a>.</span></p>
<p><span data-contrast="auto">A visualizer is a file with .natvis extension that allows you to manipulate the way native types appear in the debugger&#8217;s watch window.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:259}"> </span></p>
<p><img class="aligncenter wp-image-28229" src="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2021/06/watch-simpleview.png" alt="A visualisation for vectors of ints" width="271" height="282" /></p>
<p><span data-contrast="auto">We&#8217;ve been working on fixing existing issues with the visualizers and augmenting them, but with C++20 coming with new types, they have been falling behind. We decided to open source them so that the community can benefit and collaborate.</span></p>
<p>&nbsp;</p>
<h1 id="whats-available"><span data-contrast="auto">What’s Available? </span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:259}"> </span></h1>
<p><span data-contrast="auto">The file is now in the GitHub repo under </span><a href="https://github.com/microsoft/STL/blob/main/stl/debugger/STL.natvis"><span data-contrast="none">stl\debugger\STL.natvis</span></a><span data-contrast="auto">. We also have available documentation for the .natvis file format </span><a href="https://docs.microsoft.com/en-us/visualstudio/debugger/create-custom-views-of-native-objects?view=vs-2019"><span data-contrast="none">here</span></a><span data-contrast="auto">. All changes made on GitHub will be ported to Visual Studio.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:259}"> </span></p>
<p><span data-contrast="auto">This has been up already for a couple of weeks and we are happy to see that there are already contributors helping in this new area. We would like to thank AdamBucior, statementreply, SuperWig and joemmett. Some of the PRs add visualizers to coroutines, chrono, ranges, the spaceship operator, source location, span, and more. </span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:259}"> </span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:259}"> </span></p>
<p><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:259}">  </span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:259}"> <a href="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2021/06/112188892-57bd2d80-8bfb-11eb-9044-66bca3e1b2b0.png"><img class="aligncenter wp-image-28228" src="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2021/06/112188892-57bd2d80-8bfb-11eb-9044-66bca3e1b2b0.png" alt="Visualisation of various chrono types" width="743" height="368" /></a></span></p>
<p>&nbsp;</p>
<h1 id="contribute-now"><span data-contrast="auto">Contribute now!</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:259}"> </span></h1>
<p><span data-contrast="auto">We are happy with the results of this change, and we would like to see more. After you make changes to the visualizer you can test them by adding the natvis file to any Visual Studio C++ project by right clicking your project, selecting Add &gt; Existing Item, and choosing the STL.natvis file. After doing this you should be able to see your changes in a Visual Studio debugging session. </span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:259}"> </span></p>
<p><a href="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2021/06/Capture.png"><img class="aligncenter wp-image-28227" src="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2021/06/Capture.png" alt="Selecting the STL.natvis file" width="257" height="189" /></a></p>
<p>The post <a rel="nofollow" href="https://devblogs.microsoft.com/cppblog/stl-visualizers-on-github/">STL Visualizers on GitHub</a> appeared first on <a rel="nofollow" href="https://devblogs.microsoft.com/cppblog">C++ Team Blog</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://devblogs.microsoft.com/cppblog/stl-visualizers-on-github/feed/</wfw:commentRss>
			<slash:comments>2</slash:comments>
		
		
			</item>
		<item>
		<title>Address Sanitizer Now in “Early Release” for Xbox Developers</title>
		<link>https://devblogs.microsoft.com/cppblog/address-sanitizer-now-in-early-release-for-xbox-developers/</link>
					<comments>https://devblogs.microsoft.com/cppblog/address-sanitizer-now-in-early-release-for-xbox-developers/#respond</comments>
		
		<dc:creator><![CDATA[David Li]]></dc:creator>
		<pubDate>Tue, 22 Jun 2021 17:29:43 +0000</pubDate>
				<category><![CDATA[C++]]></category>
		<category><![CDATA[address sanitizer]]></category>
		<category><![CDATA[debugging]]></category>
		<category><![CDATA[dump]]></category>
		<category><![CDATA[memory]]></category>
		<category><![CDATA[xbox]]></category>
		<guid isPermaLink="false">https://devblogs.microsoft.com/cppblog/?p=28236</guid>

					<description><![CDATA[<p>The following blog post is authored by Tad Swift, a Principal Software Engineer on the Xbox Advanced Technology Group (ATG).<br />
Introduction<br />
Address Sanitizer (ASan) is a valuable tool for lighting up hard-to-find memory bugs. Since the MSVC release in Visual Studio version 16.9,</p>
<p>The post <a rel="nofollow" href="https://devblogs.microsoft.com/cppblog/address-sanitizer-now-in-early-release-for-xbox-developers/">Address Sanitizer Now in “Early Release” for Xbox Developers</a> appeared first on <a rel="nofollow" href="https://devblogs.microsoft.com/cppblog">C++ Team Blog</a>.</p>
]]></description>
										<content:encoded><![CDATA[<p><a href="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2021/06/Xbox_2020_horz_Grn_RGB.png"><img class="aligncenter size-full wp-image-28237" src="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2021/06/Xbox_2020_horz_Grn_RGB.png" alt="Image Xbox 2020 horz Grn RGB" width="1659" height="793" srcset="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2021/06/Xbox_2020_horz_Grn_RGB.png 1659w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2021/06/Xbox_2020_horz_Grn_RGB-300x143.png 300w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2021/06/Xbox_2020_horz_Grn_RGB-1024x489.png 1024w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2021/06/Xbox_2020_horz_Grn_RGB-768x367.png 768w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2021/06/Xbox_2020_horz_Grn_RGB-1536x734.png 1536w" sizes="(max-width: 1659px) 100vw, 1659px" /></a></p>
<p><strong>The following blog post is authored by Tad Swift, a Principal Software Engineer on the Xbox Advanced Technology Group (ATG). </strong></p>
<h1 id="introduction">Introduction</h1>
<p><strong>Address Sanitizer</strong> (<a href="https://devblogs.microsoft.com/cppblog/addresssanitizer-asan-for-windows-with-msvc/">ASan</a>) is a valuable tool for lighting up hard-to-find memory bugs. Since the MSVC release in <a href="https://devblogs.microsoft.com/cppblog/address-sanitizer-for-msvc-now-generally-available/">Visual Studio version 16.9</a>, we&#8217;ve been working with our partners to bring ASan to the Xbox platform.</p>
<p>With the recent release of the June Xbox GDK, we are happy to announce Address Sanitizer is available in <em>&#8220;early release&#8221;</em> form.</p>
<p>In this blog post, we will showcase how to get ASan working with the Xbox platform.</p>
<h1 id="building-with-address-sanitizer">Building with Address Sanitizer</h1>
<p>Setting up an Xbox project for ASan should follow the same guidelines as the PC version, with the Address Sanitizer being integrated into the usual Visual Studio debugging experience. However, there are some specific use-cases for Xbox developers that were not supported by default under ASan.</p>
<p><a href="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2021/03/ASan-example.png"><img class="aligncenter size-full wp-image-27733" src="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2021/03/ASan-example.png" alt="Image ASan example" width="1428" height="949" srcset="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2021/03/ASan-example.png 1428w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2021/03/ASan-example-300x199.png 300w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2021/03/ASan-example-1024x681.png 1024w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2021/03/ASan-example-768x510.png 768w" sizes="(max-width: 1428px) 100vw, 1428px" /></a></p>
<p>Modern games consist of highly complicated, multi-threaded code whose goal is to run as fast as possible while holding a target frame rate. This means that the code is tested frequently through development by means of an automated build and test setup. These server machines may build the code, deploy it to a console, and run the game without a debugger connection meaning that they might miss any ASan error reports shown in the debug output. Ideally, the test server could collect crash dumps from any Asan errors, but due to differences in the Xbox GDK, extra steps must be taken to extract Address Sanitizer crash dump information from automated runs.</p>
<h1 id="enhanced-debugger-support">Enhanced Debugger Support</h1>
<p><a href="https://docs.microsoft.com/en-us/cpp/sanitizers/asan-offline-crash-dumps?view=msvc-160">MSVC’s ASan implementation</a> can create a crash dump with detailed exception information, but this could only be enabled from an environment variable which isn’t supported on Xbox. To get crash dumps on Xbox, developers must specify a function in their code to supply the dump filename.</p>
<p>Here are two examples of what the function looks like:</p>
<pre class="prettyprint">extern "C" const wchar_t* __vcasan_save_dumps()
{
    return L"myCrashDump.dmp";
}</pre>
<pre class="prettyprint">extern "C" const WCHAR* __vcasan_save_dumps()
{
    // Choose to create a crash dump based on a runtime flag
    if ( gCollectCrashDumps )
    {
        return L"myCrashDump.dmp";
    }
    else
    {
        // Returning NULL stops ASan creating a crash dump
        return NULL;
    };
}
</pre>
<p>There are no specific requirements around the name returned by this function, but it must be a valid filepath on the target device where the code is being run.</p>
<p>Now that we can support crash dumps on Xbox, we also decided to give developers more flexibility around the type of crash dump that is produced. There are instances where a simple “Triage” dump is sufficient to see the callstack of where the process failed, but within games, there is usually the requirements to see more of the surrounding memory when the issue occurred. To this end, we have provided three configurable crash dump types that are supported by the Xbox platform and match the crash dumps developers expect from their Xbox consoles.</p>
<p><strong><em><u>Note:</u></em></strong> As with the previous function, this override is <strong><em>optional</em></strong> on Xbox, but it is highly recommended if you want to use crash dumps to collect ASan information without a debugger attached.  If you provide the dump filename but <strong><em>not</em></strong> a dumptype override, then it will fail to generate a valid crash dump on Xbox.</p>
<p>This callback returns a number to indicate the dump type required. Valid types are shown in the example below:</p>
<pre class="prettyprint">extern "C" const signed int __vcasan_override_dumptype()
{
    // The current valid values are:
    // 0 : Triage Dump
    // 1 : Mini Dump
    // 2 : Heap Dump
    // Values outside this range are defaulted to 2 (Full Heap)

    // This example uses Heap Dumps which give the most information
    return 2;
}
</pre>
<p>Both callback functions are available as part of 16.9.8, 16.10.2 or a future 16.11 preview release of Visual Studio.</p>
<h1 id="example-code">Example code</h1>
<p>This code demonstrates how easily these functions can be added into an existing codebase and adapted as required:</p>
<pre class="prettyprint">#include &lt;cstdio&gt;
 
extern "C" const wchar_t* __vcasan_save_dumps()
{
    // Specify dump filename
    return L"myCrashDump.dmp";
}
 
extern "C" const signed int __vcasan_override_dumptype()
{
    // Full Heap dump requested
    return 2;
}
 
static const int arraySize = 8;
static int asanArray[arraySize];
static int asanAccumulator = 0;
 
int main()
{
    // ASan should use the callback functions that we have provided
    for (int loop = 0; loop &lt;= arraySize; loop++)
    {
        // We don’t really care about accumulating the values
        // We just want to access outside the array causing an ASan error
        asanAccumulator += asanArray[loop];
    }
 
    // If we get here, we have failed as ASAN should have caught the error above
    printf("fail");
 
    return 0;
}
</pre>
<p>Compile the code via this command line:</p>
<pre class="prettyprint">cl /nologo /fsanitize=address /Zi AsanTest.cpp</pre>
<p>This code, when run should throw an ASan exception and produce a crash dump as specified by our functions above. You can integrate these functions into existing code and generate crash dumps of your choosing.</p>
<h1 id="summary">Summary<a href="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2021/06/XBOXecoVS65.jpg"><img class="aligncenter size-full wp-image-28247" src="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2021/06/XBOXecoVS65.jpg" alt="Xbox Eco System " width="1920" height="1080" srcset="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2021/06/XBOXecoVS65.jpg 1920w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2021/06/XBOXecoVS65-300x169.jpg 300w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2021/06/XBOXecoVS65-1024x576.jpg 1024w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2021/06/XBOXecoVS65-768x432.jpg 768w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2021/06/XBOXecoVS65-1536x864.jpg 1536w" sizes="(max-width: 1920px) 100vw, 1920px" /></a></h1>
<p>With Address Sanitizer now being available on Xbox, developers can leverage this powerful technology to help debug memory issues in their titles.  Combined with the crash dump changes detailed here, it should provide all the flexibility required to support your automated tests suites and enable you to find issues quickly and easily.  We welcome any feedback on these changes and would ask you to raise any issues through the Xbox forums in the usual way.</p>
<p>Further references for more information:</p>
<ul>
<li>Detailed information regarding the setup and available options in the Microsoft documentation: <a href="https://docs.microsoft.com/en-us/cpp/sanitizers/asan?view=msvc-160">Address Sanitizer | Microsoft Docs</a></li>
<li>Discussion around where this technology has been useful: <a href="https://devblogs.microsoft.com/cppblog/finding-bugs-with-addresssanitizer-msvc-compiler/">Finding Bugs with AddressSanitizer: Patterns from Open Source Projects</a></li>
</ul>
<p>&nbsp;</p>
<p>The post <a rel="nofollow" href="https://devblogs.microsoft.com/cppblog/address-sanitizer-now-in-early-release-for-xbox-developers/">Address Sanitizer Now in “Early Release” for Xbox Developers</a> appeared first on <a rel="nofollow" href="https://devblogs.microsoft.com/cppblog">C++ Team Blog</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://devblogs.microsoft.com/cppblog/address-sanitizer-now-in-early-release-for-xbox-developers/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>Static Analysis Fixes, Improvements, and Updates in Visual Studio 2019 version 16.10</title>
		<link>https://devblogs.microsoft.com/cppblog/static-analysis-fixes-improvements-and-updates-in-visual-studio-2019-version-16-10/</link>
					<comments>https://devblogs.microsoft.com/cppblog/static-analysis-fixes-improvements-and-updates-in-visual-studio-2019-version-16-10/#respond</comments>
		
		<dc:creator><![CDATA[Jordan Maples]]></dc:creator>
		<pubDate>Thu, 10 Jun 2021 16:00:10 +0000</pubDate>
				<category><![CDATA[C++]]></category>
		<category><![CDATA[cppcorecheck]]></category>
		<category><![CDATA[static analysis]]></category>
		<guid isPermaLink="false">https://devblogs.microsoft.com/cppblog/?p=28184</guid>

					<description><![CDATA[<p>The C++ static analysis team is committed to making your C++ coding experience as safe as possible. We are adding richer code safety checks and addressing high impact customer feedback bugs posted on the  C++ Developer Community page. Thank you for engaging with us and giving us great feedback on the past releases and early previews leading to this point.</p>
<p>The post <a rel="nofollow" href="https://devblogs.microsoft.com/cppblog/static-analysis-fixes-improvements-and-updates-in-visual-studio-2019-version-16-10/">Static Analysis Fixes, Improvements, and Updates in Visual Studio 2019 version 16.10</a> appeared first on <a rel="nofollow" href="https://devblogs.microsoft.com/cppblog">C++ Team Blog</a>.</p>
]]></description>
										<content:encoded><![CDATA[<p>The C++ static analysis team is committed to making your C++ coding experience as safe as possible. We are adding richer code safety checks and addressing high impact customer feedback bugs posted on the  <a href="https://developercommunity.visualstudio.com/spaces/8/index.html">C++ Developer Community</a> page. Thank you for engaging with us and giving us great feedback on the past releases and early previews leading to this point. Below is the compilation of improvements and bug fixes that were made from Visual Studio 2019 versions 16.9 to 16.10 for <a href="https://docs.microsoft.com/en-us/cpp/build/reference/analyze-code-analysis">code analysis</a> and <a href="https://docs.microsoft.com/en-us/cpp/code-quality/using-the-cpp-core-guidelines-checkers">CppCoreCheck</a>.</p>
<h2 id="new-features">New features:</h2>
<ul>
<li><a href="https://aka.ms/cpp/warnings/C26479">C26479</a> is a new warning that supports <a href="https://github.com/isocpp/CppCoreGuidelines/blob/master/CppCoreGuidelines.md#f48-dont-return-stdmovelocal">F.48</a>, don’t return a local variable with <code>std::move</code>.</li>
<li><a href="https://aka.ms/cpp/warnings/C26458">C26458</a> is a new warning that serves as a path-sensitive version of <a href="https://aka.ms/cpp/warnings/C26446">C26446</a>. C26458 had a dedicated blog post in mid-May. In case you missed it, you can read more about the new warning <a href="https://devblogs.microsoft.com/cppblog/new-static-analysis-rule-for-bounds-checking/">here</a>.</li>
<li><a href="https://aka.ms/cpp/warnings/C26800">C26800</a>, which is used to detect if a variable is used after it has been moved from, is no longer an experimental rule and is now a part of the default rule set.</li>
<li>The lifetime warnings <a href="https://aka.ms/cpp/warnings/C26810">C26810</a> and <a href="https://aka.ms/cpp/warnings/C26811">C26811</a>, originally introduced in 16.2 and discussed <a href="https://devblogs.microsoft.com/cppblog/new-code-analysis-checks-in-visual-studio-2019-use-after-move-and-coroutine/">here</a>, are no longer experimental and can be used by selecting the default ruleset or <code>“CppCoreCheckLifetimeRules”</code>.</li>
<li>Sarif suppression properties will only be populated when <code>/analyze:log:includesuppressed</code> is specified. This can be useful for auditing the rules that are suppressed in a codebase.</li>
</ul>
<h2 id="analysis-crash-fixes">Analysis crash fixes:</h2>
<ul>
<li>Fixed a crash in the analysis engine caused by an empty brace initializer in an initializer list.</li>
</ul>
<pre class="prettyprint">struct TestStruct {
public:
    enum TestEnum : char { Dummy };

    TestEnum m1 : 1;
    TestEnum m2 : 1;
    short m3;
};

TestStruct Test2()
{
    return{ TestStruct::Dummy, TestStruct::Dummy, {} };
}</pre>
<ul>
<li>Fixed analysis engine crash when using the drivers plugin from the WDK.</li>
</ul>
<h2 id="bug-fixes-and-optimizations">Bug fixes and optimizations:</h2>
<ul>
<li><a href="https://github.com/isocpp/CppCoreGuidelines/blob/master/CppCoreGuidelines.md#c35-a-base-class-destructor-should-be-either-public-and-virtual-or-protected-and-non-virtual">C.35</a> no longer is issued on functions marked override in classes that are marked <code>final</code>.</li>
<li>The message string for <a href="https://aka.ms/cpp/warnings/C26434">C26434</a> has been updated to remove the reference to <a href="https://github.com/isocpp/CppCoreGuidelines/blob/master/CppCoreGuidelines.md#c128-virtual-functions-should-specify-exactly-one-of-virtual-override-or-final">C.128</a>. This warning does not align to C.128 but is still a helpful warning to prevent hiding member functions.</li>
<li>Fix false negative for <a href="https://aka.ms/cpp/warnings/C26414">C26414</a> for some unique pointers returned from <code>std::make_unique</code> where no arguments are passed to <code>std::make_unique</code></li>
</ul>
<pre class="prettyprint">#include &lt;memory&gt;
struct struct_1
{
    void method_1();
};
void c26414()
{
    auto ptr = std::make_unique&lt;struct_1&gt;(); //now issues C26414
    ptr-&gt;method_1();
}</pre>
<ul>
<li><a href="https://aka.ms/cpp/warnings/C26800">C26800</a> – Use of a moved from object.
<ul>
<li>Prevent analysis in function bodies where called functions do not have rvalue reference parameters.</li>
<li>Fixed false positive that appeared when using coroutines.</li>
</ul>
</li>
<li>Improved the detection of <a href="https://aka.ms/cpp/warnings/C26812">C26812</a>, “prefer <code>enum class</code> over <code>enum</code>”</li>
<li>Fixed false positive for <a href="https://aka.ms/cpp/warnings/C6285">C6285</a> and <a href="https://aka.ms/cpp/warnings/C6237">C6237</a> when code contains <code>if constexpr</code>.</li>
</ul>
<pre class="prettyprint">constexpr void f1()
{
    constexpr int val1 = false;
    constexpr int val2 = false;
    if constexpr (val1 == true || val2 == true)
    {
        //...
    }
    if (val1 == true || val2 == true) // C6285
    {
        //...
    }
}

constexpr bool foo()
{
    return false;
}
constexpr bool bar()
{
    return true;
}
constexpr void f2()
{
    constexpr bool fooVal = foo();
    if constexpr (fooVal &amp;&amp; bar())
    {
        //...
    }
    if (fooVal &amp;&amp; bar()) //C6237
    {
        //...
    }
}</pre>
<ul>
<li>Improvements for the coroutine checks:
<ul>
<li>Fixed problem that caused warnings to be issued against an incorrect line.</li>
<li>Improved detection for cases using rvalue references.</li>
<li>Fixed a false positive in code using <code>std::suspend_never</code></li>
</ul>
</li>
<li>Fixed false positive in local lifetime check caused by use of <code>std::optional</code></li>
</ul>
<pre class="prettyprint">void assignToReferenceArg( std::optional&lt;double&gt;&amp; x )
{
    x = 1.0; // Used to produce false positive
}</pre>
<ul>
<li>Fixed bounds warning for code in <code>if constexpr</code> block.</li>
</ul>
<pre class="prettyprint">constexpr void test_constexpr()
{
    int arr[] = {1,2,3};
    constexpr int index = -1;

    if constexpr (index != -1)
    {
        arr[index]; //No C6201
    }

    if constexpr (index == -1)
    {
        arr[index]; //C6201
    }
}</pre>
<ul>
<li>Fixed analysis failure for file paths that contained non-ASCII characters.</li>
<li>General improvements to the <code>uninit</code> check. See this <a href="https://devblogs.microsoft.com/cppblog/ignoring-automatic-initialization-for-code-analysis/">post</a> for more information on how this
affects analysis.</li>
</ul>
<h2 id="try-it-out-and-let-us-know-what-you-think">Try it out and let us know what you think:</h2>
<p>The work that we do is heavily influenced by feedback we receive on the <a href="https://developercommunity.visualstudio.com/spaces/8/index.html">Developer Community</a> so thank you again for your participation. Please continue to file feedback and let us know if there is a checker or rule that you would like to see added to C++ Core Check. Stay tuned for more C++ static analysis blogs. In the meanwhile, do not hesitate to reach out to us. We can be reached via the comments below or <a href="https://twitter.com/visualc">@VisualC</a> on Twitter.</p>
<p>The post <a rel="nofollow" href="https://devblogs.microsoft.com/cppblog/static-analysis-fixes-improvements-and-updates-in-visual-studio-2019-version-16-10/">Static Analysis Fixes, Improvements, and Updates in Visual Studio 2019 version 16.10</a> appeared first on <a rel="nofollow" href="https://devblogs.microsoft.com/cppblog">C++ Team Blog</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://devblogs.microsoft.com/cppblog/static-analysis-fixes-improvements-and-updates-in-visual-studio-2019-version-16-10/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>&#060;format&#062; in Visual Studio 2019 version 16.10</title>
		<link>https://devblogs.microsoft.com/cppblog/format-in-visual-studio-2019-version-16-10/</link>
					<comments>https://devblogs.microsoft.com/cppblog/format-in-visual-studio-2019-version-16-10/#comments</comments>
		
		<dc:creator><![CDATA[Charlie Barto]]></dc:creator>
		<pubDate>Wed, 09 Jun 2021 16:00:28 +0000</pubDate>
				<category><![CDATA[C++]]></category>
		<guid isPermaLink="false">https://devblogs.microsoft.com/cppblog/?p=28122</guid>

					<description><![CDATA[<p>C++20 adds a new text formatting facility to the standard library, designed primarily to replace snprintf and friends with a fast and type safe interface. The standardized library is based on the existing {fmt} library, so users of that library will feel at home.</p>
<p>The post <a rel="nofollow" href="https://devblogs.microsoft.com/cppblog/format-in-visual-studio-2019-version-16-10/">&lt;format&gt; in Visual Studio 2019 version 16.10</a> appeared first on <a rel="nofollow" href="https://devblogs.microsoft.com/cppblog">C++ Team Blog</a>.</p>
]]></description>
										<content:encoded><![CDATA[<p>C++20 adds a new text formatting facility to the standard library, designed primarily to replace <code>snprintf</code> and friends with a fast and type safe interface. The standardized library is based on the existing <a href="https://github.com/fmtlib/fmt">{fmt}</a> library, so users of that library will feel at home.</p>
<p>Before diving into how <code>std::format</code> works I want to thank Victor Zverovich, Elnar Dakeshov, Casey Carter, and miscco, all of whom made <a href="https://github.com/microsoft/STL/pulls?q=is:pr+label:format+">substantial contributions</a> to this feature, and were the reason why we could complete it so quickly.</p>
<h2 id="overview">Overview</h2>
<p>To start using <code>&lt;format&gt;</code> you just need to be using Visual Studio 2019 version 16.10 or later and you need to be compiling with <code>/std:c++latest</code>. You can get the latest Visual Studio preview <a href="https://visualstudio.microsoft.com/vs/preview/">here</a>.</p>
<p>The simplest and most common way to use <code>&lt;format&gt;</code> is to call:</p>
<pre class="prettyprint">template&lt;class... Args&gt;
string format(string_view fmt, const Args&amp;... args);</pre>
<p><code>fmt</code> is the format-string and <code>args</code> are the things you’d like to format. The format string consists of some text interspersed with curly brace delimited replacement fields. For example: <code>"Format arguments: {} {}!"</code> is a format string for formatting two arguments. Each replacement field corresponds to the next argument passed. So <code>std::format("Format arguments {} {}!", 2, 1)</code> would produce the string <code>"Format arguments 2 1!"</code></p>
<p>Format strings can also contain numbered replacement fields, for example <code>"Format arguments {1} {0}!"</code>. These refer to the numbered argument passed in, starting from zero. Numbered and un-numbered (automatic) replacement fields can not be mixed in the same format string.</p>
<p>There are all sorts of modifiers you can use to change the way a particular parameter is formatted. These are called “format specifiers” and are specified in the replacement field like so: <code>std::format("{:&lt;specifiers&gt;}", &lt;arg&gt;)</code>. Let’s look at an example that has one of everything.</p>
<pre class="prettyprint"><code>std::format("{:&#x1f431;^+#12.4La}", 4.f);</code></pre>
<p>This returns the string <code>“&#x1f431;+1.0000p+2&#x1f431;”</code> (printing this string out to the console on Windows can be a bit difficult). Let’s go through what each component of the above string told <code>std::format</code> to do. First we have<code> “&#x1f431;^”</code> the “fill and align” part of the format specifiers, saying we’d like our output center aligned and padded with cat emojis. Next we have <code>“+”</code>, meaning we’d like a sign character no matter what (the default is <code>“-”</code> to only print the<code> “-”</code> sign for negatives, and you can also use a space to ask for a minus sign or a space). After that we specify <code>“#”</code>, meaning “alternate form”. For floats the alternate form causes format to always insert a decimal point. Next we specify <code>“12.4”</code> to get a width of 12 and a precision of 4. That means format will use the “fill” and “alignment” settings to make sure our output is at least 12 characters wide and the float itself will be printed to 4 digits of precision. Next the <code>“L”</code> specifier causes format to use locale specific formatting to print things like decimal separators. Finally <code>“a”</code> causes the output to be in hexfloat format. More detailed information about the possible format specifications can be found at <a href="https://en.cppreference.com/w/cpp/utility/format/formatter#Standard_format_specification">cppreference</a>.</p>
<p>For width and precision specifiers you may reference a format argument instead of using a literal value like so:</p>
<pre class="prettyprint">std::format("{0:{1}.{2}}", 4.2f, 4, 5);</pre>
<p>This results in a width of 4 and a precision of 5. The rules for mixing automatic and manual indexing (don’t do it) still apply, but you can use automatic indexing to reference width and precision as in:</p>
<pre class="prettyprint">std::format("{:{}.{}}", 4.2f, 4, 5);</pre>
<p>The assignment of automatic indices is performed left to right, so the above two examples are equivalent.</p>
<h2 id="performance">Performance</h2>
<p>In general <code>std::format</code> performance should be in the same ballpark as <code>fmt::format</code> and <code>snprintf</code> if you compile your code with the <code>/utf-8</code> <a href="https://docs.microsoft.com/en-us/cpp/build/reference/utf-8-set-source-and-executable-character-sets-to-utf-8?view=msvc-160"> </a>. If you don’t use the <code>/utf-8</code> option then performance can be significantly degraded because we need to retrieve your system locale to correctly parse the format string. While we’re working to improve performance for this case in a future release we recommend you use <code>/utf-8</code> for the best experience.</p>
<h2 id="unicode">Unicode</h2>
<p><code>std::format</code> doesn’t do any transcoding between different text encodings, however it is aware of the “execution character set” and uses it to interpret the format string. The versions of <code>std::format</code> taking a wide (<code>wchar_t</code>) format string are <em>always</em> interpreted as UTF-16. The versions of <code>std::format</code> taking a narrow (char) format string interpret the format string as UTF-8 if we detect the<code> /utf-8</code> (or <code>/execution-charset:utf-8</code>) option. Otherwise we interpret the format string as being encoded in the active system codepage. This means that if you compile your code with a non-UTF-8 execution charset it may not run correctly on systems with a different system codepage setting. There’s also a <em>significant</em> performance cost to figuring out the system codepage, so for best performance we recommend you compile with<code> /utf-8</code>. We’re working to improve the performance of format in non-UTF execution character sets in future releases.</p>
<p>Unicode also comes into play when dealing with width and precision specification for strings. When we interpret the format string as UTF-8 or UTF-16 we compute the “estimated width” of a string taking into account a rough estimate of the size of each code-point. If we’re interpreting the format string as a non-Unicode encoding we just estimate the width as the number of code units (not code points) in the string. In a future release we’ll add grapheme clusterization to the width computations for Unicode encodings.</p>
<h2 id="locales">Locales</h2>
<p>While we always parse the <em>format string</em> according to the rules above, the locale used for things like decimal separator positions can be customized. By default no locale is used. If you use the <code>L</code> specifier then some locale specific formatting may be used. By default it’s the current global locale as returned by a default constructed <code>std::locale</code>, however each formatting function has a version allowing you to pass in your own <code>std::locale</code> object to override that behavior.</p>
<h2 id="future-work">Future work</h2>
<p>Over the next few Visual Studio releases we’ll be improving the performance of <code>std::format</code>, and fixing bugs. Additionally C++23 will likely add compile time format checking to format literals and we may implement that before 2023 (for code you want to work great in C++23 don’t rely on catching <code>std::format_errors</code> from invalid format strings!). C++23 will also make a small change to the definitions of <code>std::vformat_to</code> and <code>std::format_to</code> that reduces code size but can be observable, for forward compatibility make sure any custom formatters work with all output iterators. More information on these changes can be found in <a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2021/p2216r3.html">p2216r3</a>. C++23 may also bring additional functionality like <code>std::print</code> and better ways to handle Unicode text.</p>
<h2 id="differences-from-fmt-not-exhaustive">Differences from {fmt} (not exhaustive)</h2>
<p>For those familiar with <code>{fmt}</code>, a quick list of differences from the standardized version of the library:</p>
<ul>
<li>Named arguments are not supported.</li>
<li>None of the miscellaneous formatting functions like <code>fmt::print</code> or <code>fmt::printf</code> are supported.</li>
<li>Format strings are not checked at compile time</li>
<li>There is no support for automatically formatting types with an <code>std::ostream&amp; operator&lt;&lt;(std::ostream&amp;, const T&amp;)</code> overload</li>
<li>The behavior of some format specifiers is slightly different (for example the default alignment for <code>void*</code>, and allowing sign specifiers for unsigned types)</li>
</ul>
<h2 id="give-us-feedback">Give us feedback</h2>
<p>Try out format in your own code, and file any bugs on our <a href="https://github.com/microsoft/STL/issues">out GitHub issue tracker</a>.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>The post <a rel="nofollow" href="https://devblogs.microsoft.com/cppblog/format-in-visual-studio-2019-version-16-10/">&lt;format&gt; in Visual Studio 2019 version 16.10</a> appeared first on <a rel="nofollow" href="https://devblogs.microsoft.com/cppblog">C++ Team Blog</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://devblogs.microsoft.com/cppblog/format-in-visual-studio-2019-version-16-10/feed/</wfw:commentRss>
			<slash:comments>26</slash:comments>
		
		
			</item>
		<item>
		<title>C++20&#8217;s Extensions to Chrono Available in Visual Studio 2019 version 16.10</title>
		<link>https://devblogs.microsoft.com/cppblog/cpp20s-extensions-to-chrono-available-in-visual-studio-2019-version-16-10/</link>
					<comments>https://devblogs.microsoft.com/cppblog/cpp20s-extensions-to-chrono-available-in-visual-studio-2019-version-16-10/#comments</comments>
		
		<dc:creator><![CDATA[Miya Natsuhara]]></dc:creator>
		<pubDate>Tue, 01 Jun 2021 19:27:27 +0000</pubDate>
				<category><![CDATA[Announcement]]></category>
		<category><![CDATA[C++]]></category>
		<guid isPermaLink="false">https://devblogs.microsoft.com/cppblog/?p=28137</guid>

					<description><![CDATA[<p>While the &#60;chrono&#62; header has been available as part of the STL since C++11, among the changes included in C++20 there were several extensions to chrono including support for calendrical types, time zones, leap seconds, and integration with format. A great deal of innovation and work was required in order to complete these additional features;</p>
<p>The post <a rel="nofollow" href="https://devblogs.microsoft.com/cppblog/cpp20s-extensions-to-chrono-available-in-visual-studio-2019-version-16-10/">C++20&#8217;s Extensions to Chrono Available in Visual Studio 2019 version 16.10</a> appeared first on <a rel="nofollow" href="https://devblogs.microsoft.com/cppblog">C++ Team Blog</a>.</p>
]]></description>
										<content:encoded><![CDATA[<p>While the <code>&lt;chrono&gt;</code> header has been available as part of the STL since C++11, among the changes included in C++20 there were several extensions to chrono including support for calendrical types, time zones, leap seconds, and integration with format. A great deal of innovation and work was required in order to complete these additional features; shipping these new C++20 additions so soon would not have been possible without the amazing support of the open-source community. In particular, I would like to recognize the significant contributions from <a href="https://github.com/MattStephanson">Matt Stephanson</a>, <a href="https://github.com/statementreply">statementreply</a>, and <a href="https://github.com/SuperWig">Daniel Marshall</a> in helping complete our implementation.</p>
<h1 id="overview-examples">Overview &amp; Examples</h1>
<p>There were numerous additions to the <code>&lt;chrono&gt;</code> header in the changes for C++20, and here I’d like to highlight a few.</p>
<h2 id="calendrical-types">Calendrical Types</h2>
<p>The PR <a href="https://github.com/microsoft/STL/pull/323">GH-323: &lt;chrono&gt; Partially implement P0355R7</a>, authored by Daniel Marshall added a long list of new calendrical types to the header for date support. For example:</p>
<pre class="prettyprint">#include &lt;chrono&gt;
using namespace std::chrono;

int main() {
   year y{2021};
   year_month_day world_bee_day = May/20d/y;
   month_weekday mwd = May/Thurs[3];
   year_month_weekday world_bee_day2 = 2021/mwd;
}</pre>
<p>Here we create a <code>year</code> object for the year 2021, then use it to create a <code>year_month_day</code> object representing May 20, 2021 or World Bee Day. We then use an alternate form to represent the exact same day by making a <code>month_weekday</code> object representing the third Thursday of May (indicated with the <code>Thurs[3]</code> which is creating a <code>weekday_indexed</code> object) in an unspecified year, and then using that to create a <code>year_month_weekday</code> object by combining It with the integer <code>2021</code> which is interpreted as the year.</p>
<p>You can see that the library now includes a variety of different calendrical types that allow users to create dates in a variety of different ways. These different forms of dates are intended to be very easy-to-use and intuitive, so that users can choose the method most comfortable or natural to them.</p>
<h2 id="time-zones">Time Zones</h2>
<p>Awareness of time zones were another significant addition to the <code>&lt;chrono&gt;</code> header, which included new types (e.g., <code>time_zone</code>, <code>tzdb</code>, <code>zoned_time</code>) as well as significant consideration for how to manage the data that library’s newfound time-zone-awareness would require. A small example displaying an example of the new time zone feature follows:</p>
<pre class="prettyprint">#include &lt;chrono&gt;
using namespace std::chrono;

int main() {
   const auto&amp; my_tzdb = get_tzdb();
   const time_zone* la_tz = my_tzdb.locate_zone("America/Los_Angeles");
   auto world_nutella_day = local_days{2021y/Feb/5};
   zoned_time la_nutella_day{la_tz, world_nutella_day + 3h + 44min + 12s};
   zoned_time utc_nutella_day{"Etc/UTC", la_nutella_day};
}</pre>
<p><span style="font-size: 1rem;">This is only a small example of the functionalities included in newly-added time zone support. The feature also supports converting between different time zones, notions of “local” time, and possibilities of ambiguous or nonexistent conversions to/from time zones due to daylight savings transitions.  </span>In this example, we first attain a reference to the most up-to-date <code>tzdb</code> object which contains data about time zones. We then use it to look up the America/Los Angeles time zone (GMT-07:00) by name, storing a <code>time_zone</code> pointer pointing to that entry in the <code>tzdb</code>. Next we create a specific date (corresponding to World Nutella Day) using <code>local_days</code> and some of the calendrical types mentioned above, which we can then use to create a <code>zoned_time</code> object which pairs a specific date/time (in this case World Nutella Day at 03:44:12) with a given time zone (America/Los Angeles in this case).  We then use the America/Los Angeles <code>zoned_time</code> to create a <code>zoned_time</code> corresponding to UTC time, illustrating the time zone conversion functionality.</p>
<p>One specific challenge that we encountered in our implementation was how to actually access the data that the time zones required. The C++20 Standard defines the time zone functionality in terms of the <a href="https://www.iana.org/time-zones">IANA database</a>, however MSVC’s STL would not be able to ship the entire database with its implementation due to its size and the issue of how to provide updates to it. We had to explore alternate options as we pondered how to support this Standard-mandated feature without subjecting our customers to absurd header size increases. We eventually discovered the <a href="https://unicode-org.github.io/icu/userguide/datetime/">ICU</a> library which <a href="https://docs.microsoft.com/en-us/windows/win32/intl/international-components-for-unicode--icu-">ships as part of the Windows 10 operating system</a> in more recent versions (19H1 and after) and derives its data from the IANA database itself. As a result, updates to the time zone data will be executed along with updates to the OS through Windows Update. While our current implementation relies on the availability of the ICU DLL in more recent OS versions, we have plans to <a href="https://github.com/microsoft/STL/issues/1911">revisit the issue</a> and investigate implementing a fallback for older operating systems. While there are a few discrepancies between the IANA database and the ICU library, the data should largely be the same.</p>
<h2 id="leap-seconds">Leap Seconds</h2>
<p>Our recent changes also include support for tracking leap seconds, largely implemented in MattStephanson’s <a href="https://github.com/microsoft/STL/pull/1671">GH-1671: C++20 clocks, clock_cast, tzdb::leap_seconds</a>, with valuable input from statementreply. With this new support, you can ask whether a given time occurs during a leap second insertion or removal (fun fact, both <a href="https://en.wikipedia.org/wiki/Leap_second">positive <em>and</em> negative leap seconds</a> are possible!) or not. C++20 also added several new clock types (in addition to <code>system_clock</code>, <code>steady_clock</code>, and <code>high_resolution_clock</code> which have existed since C++11), some of them leap-second-aware (such as <code>utc_clock</code>) while others are not (such as <code>system_clock</code>). We detect new leap seconds through Windows registries (with the guidance of <a href="https://techcommunity.microsoft.com/t5/networking-blog/leap-seconds-for-the-it-pro-what-you-need-to-know/ba-p/339811">Dan Cuomo’s networking blogpost</a>), so any new leap seconds will need to be detected through Windows updates as well.</p>
<h2 id="chronat">“Chronat”</h2>
<p>The intersection of <code>chrono</code> and <code>std::format</code>, lovingly dubbed “chronat” in our repo, brings two of C++20’s largest features together. “Chronat” includes both parsing and formatting for <code>chrono</code>’s new types with format specifiers / parse flags that are for the most part analogous to <code>strftime</code>’s formatting codes. For the formatting side, there are <code>struct formatter</code> specializations for almost every new type added to chrono, allowing it to seamlessly integrate with <code>std::format</code>’s interface. See Charlie Barto’s blogpost for more information about <code>std::format</code>. A brief example of <code>chrono</code>’s parsing and formatting follows:</p>
<pre class="prettyprint">#include &lt;chrono&gt;
#include &lt;sstream&gt;
#include &lt;string&gt;
using namespace std;
using namespace std::chrono;

int main() {
   day d;
   basic_stringstream&lt;char&gt; sstr{"22"};
   basic_string&lt;char&gt; s{"%d"};
   sstr &gt;&gt; parse(s, d);
   cout &lt;&lt; d &lt;&lt; "\n";

   year_month_day programmers_day{January/7d/2021};
   cout &lt;&lt; format("International Programmer’s day: {%F}", programmers_day);
}</pre>
<p>We first have an example where we parse a <code>stringstream</code> into a <code>day</code> which can then be output to <code>std::cout</code>, then we also see an example where we use the <code>"%F"</code> format specifier and <code>std::format</code> and nicely format a <code>year_month_day</code> object to <code>std::cout</code> as well.</p>
<h1 id="implementing-in-the-open">Implementing in the Open</h1>
<p>Given the magnitude of the feature, we used several tools to help the maintainers and the community organize and track the work that needed to be done. The additions to the <code>&lt;chrono&gt;</code> header were tracked through the feature’s <a href="https://github.com/microsoft/STL/issues/12">GitHub issue</a>, and work was organized through the <a href="https://github.com/microsoft/STL/projects/7">Extensions to &lt;chrono&gt;</a> GitHub project and the <a href="https://github.com/microsoft/STL/issues/1704">Tracking Issue</a>. You can read more about the changes in code required for the feature and specific considerations we had to account for during implementation there.</p>
<h1 id="give-it-a-try">Give it a try!</h1>
<p>This has been a moderately brief overview of the extensions to <code>&lt;chrono&gt;</code> included in C++20, but there has been much more added to the header than has been covered here. These features are available for public consumption under <code>/std:c++latest</code> as of Visual Studio 2019 version 10 Previews 3, 4, and GA. I encourage you to use them to implement all of your wildest calendar-, time-zone-, and leap-second-related dreams and let us know what you think!</p>
<p>The post <a rel="nofollow" href="https://devblogs.microsoft.com/cppblog/cpp20s-extensions-to-chrono-available-in-visual-studio-2019-version-16-10/">C++20&#8217;s Extensions to Chrono Available in Visual Studio 2019 version 16.10</a> appeared first on <a rel="nofollow" href="https://devblogs.microsoft.com/cppblog">C++ Team Blog</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://devblogs.microsoft.com/cppblog/cpp20s-extensions-to-chrono-available-in-visual-studio-2019-version-16-10/feed/</wfw:commentRss>
			<slash:comments>2</slash:comments>
		
		
			</item>
		<item>
		<title>Preview of using CMake Presets for Azure Sphere development</title>
		<link>https://devblogs.microsoft.com/cppblog/preview-of-using-cmake-presets-for-azure-sphere-development/</link>
					<comments>https://devblogs.microsoft.com/cppblog/preview-of-using-cmake-presets-for-azure-sphere-development/#comments</comments>
		
		<dc:creator><![CDATA[Marc Goodner]]></dc:creator>
		<pubDate>Thu, 27 May 2021 15:00:53 +0000</pubDate>
				<category><![CDATA[Announcement]]></category>
		<category><![CDATA[CMake]]></category>
		<category><![CDATA[Containers]]></category>
		<category><![CDATA[IoT]]></category>
		<guid isPermaLink="false">https://devblogs.microsoft.com/cppblog/?p=28128</guid>

					<description><![CDATA[<p>We are happy to announce that CMake Presets preview support is available in the Visual Studio 16.10 release as well as CMake Tools version 1.7 for Visual Studio Code.<br />
Erika introduced CMake Presets and why you should use them, this post will focus on how they can be used for Azure Sphere development across Visual Studio,</p>
<p>The post <a rel="nofollow" href="https://devblogs.microsoft.com/cppblog/preview-of-using-cmake-presets-for-azure-sphere-development/">Preview of using CMake Presets for Azure Sphere development</a> appeared first on <a rel="nofollow" href="https://devblogs.microsoft.com/cppblog">C++ Team Blog</a>.</p>
]]></description>
										<content:encoded><![CDATA[<p>We are happy to announce that CMake Presets preview support is available in the Visual Studio 16.10 release as well as CMake Tools version 1.7 for Visual Studio Code.</p>
<p>Erika introduced <a href="https://devblogs.microsoft.com/cppblog/cmake-presets-integration-in-visual-studio-and-visual-studio-code/">CMake Presets and why you should use them</a>, this post will focus on how they can be used for Azure Sphere development across Visual Studio, VS Code, and GitHub Actions for consistent build settings across your development team and CI system.</p>
<p><a href="https://azure.microsoft.com/en-us/services/azure-sphere/">Azure Sphere</a> is a comprehensive IoT security solution that is beyond the scope of this article. Azure Sphere projects are CMake based, and application development is in C (<a href="https://azure.microsoft.com/en-us/services/azure-sphere/get-started/">get started</a> here).</p>
<p>As CMake Presets are still in preview in VS and VS Code they are not yet part of the Azure Sphere projects created by Visual Studio or VS Code. In the future they will be, as well as part of the official Azure Sphere samples. To collect early feedback on using CMake Presets for Azure Sphere I have prepared <a href="https://github.com/robotdad/AzureSphereBlink">a GitHub template repository of the Azure Sphere blink project</a> configured with CMake Presets you can use to follow this post.</p>
<h3 id="example-from-a-github-template">Example from a GitHub Template</h3>
<p><a href="https://docs.github.com/en/github/creating-cloning-and-archiving-repositories/creating-a-repository-on-github/creating-a-repository-from-a-template">GitHub template repositories</a> are a way you can create a new project from an existing repo as opposed to starting a fork. This is great for providing samples to start a new project from where there is no intention in cloning to send changes upstream. You can create your own repo on GitHub directly by selecting “Use this template” and then clone it locally. Or you can use <a href="https://cli.github.com/manual/">the GitHub cli</a> to create your own repo from the template locally and on GitHub in one step.</p>
<pre class="Code">gh repo create azblink --template https://github.com/robotdad/AzureSphereBlink</pre>
<p>Follow the prompts from the above command and it will create a repo in your GitHub account named azblink and create a local copy of it.</p>
<h3 id="cmake-presets-file">CMake Presets file</h3>
<p>The CMakePresets.json file in this project has presets for debug and release builds on Windows and Linux. Both of these presets inherit from a common base configuration.</p>
<pre>"name": "Base",
"description": "Base configuration using Ninja generator",
"hidden": true,
"generator": "Ninja",
"binaryDir": "${sourceDir}/build/${presetName}",
"architecture": {
    "value": "arm",
    "strategy": "external"
},
"cacheVariables": {
    "AZURE_SPHERE_TARGET_API_SET": "latest-lts"
}</pre>
<p>This configuration is tagged as hidden which means it is not available to use directly, it is only for use to provide common settings to other presets. We can see that it is set to use Ninja as the build tool, and the output directory is configured here to derive from the configuration that is used. We can also see that the variable set for which Azure Sphere API set the project is configured for.</p>
<p>There are two other hidden presets: Windows-Base and Linux-Base. These inherit from the above Base configuration and each respectively set the CMake cache variable for the Azure Sphere toolchain file. That variable uses an environment variable that is set in each of these respective sections for the default Azure Sphere SDK installation location. You will also notice a vendor section that specifies a host OS. This is used by Visual Studio and VS Code to only surface that configuration option when it is on that OS. That reduces the possibility of selecting an invalid configuration.</p>
<h3 id="visual-studio">Visual Studio</h3>
<p>If you open this project in Visual Studio it will automatically select the Windows debug configuration and is ready to build with the implicit default build configuration. The launch configuration for Visual Studio in launch.vs.json is checked in as an exception under the .vs folder so debugging is preconfigured. You should not need to modify this file.</p>
<p>See our documentation for more information on how to <a href="https://docs.microsoft.com/en-us/cpp/build/cmake-presets-vs?view=msvc-160">configure and build with CMake Presets with Visual Studio</a>.</p>
<h3 id="vs-code">VS Code</h3>
<p>If you open this project in VS Code you will be prompted for which configuration to use. Select Debug. This occurs as settings.json is preconfigured to use the CMake Tools extension. When you build the project, you will be prompted for a build configuration, select default which is implicit from the selected configuration. To debug you need to have an Azure Sphere board attached.</p>
<p>This project does contain a devcontainer definition so you may be prompted to open in a devcontainer. This is supported so feel free to try that, it will work exactly as above including debugging.</p>
<p>Since there is a devcontainer definition this project can also be opened in GitHub Codespaces. Navigate to the repo you created and select the drop down on the Code button and then Open in Codespaces. In the web interface you can build the project. If you connect to the Codespace from VS Code you can also debug to a locally attached device.</p>
<p>See our documentation for more information on <a href="https://github.com/microsoft/vscode-cmake-tools/blob/develop/docs/cmake-presets.md">how to configure and build with CMake Presets with VS Code</a>.</p>
<h3 id="github-actions">GitHub Actions</h3>
<p>This project is preconfigured to use GitHub Actions. You <a href="https://docs.microsoft.com/en-us/azure-sphere/app-development/continuous-integration">can learn more about how to use GitHub Actions with Azure Sphere projects here</a>. As CMake Presets are new the thing that varies from other samples and current guidance is the invocation of CMake. If you look in the .devcontainer/Dockerfile you will see it is a multistage definition with three targets, dev, debug-build, and release-build. The dev stage is simply the official Azure Sphere container image.  This is used for the interactive devcontainer. The other two stages inherit the dev stage as a base. Each of these stages copies the repo into the container, then run CMake with either the debug or release preset, and then set the appropriate entry point to the generated cache to start the build.</p>
<p>Look in the .github\workflows\ci.yml file and you will see minor changes from the official guidance to use the paths created in the build output through using CMake Presets.</p>
<p>If you followed along from the beginning and created your own repo from the template repository you should already have a successful build. Go to your repo on GitHub and navigate to the Actions tab. You should see a completed workflow for the initial commit. If you select that there will be an artifact with the Azure Sphere image package that can be deployed to a device directly or as part of a <a href="https://docs.microsoft.com/en-us/azure-sphere/deployment/create-a-deployment?tabs=cliv2beta">deployment to a device group</a>.</p>
<h3 id="whats-next">What’s next?</h3>
<p>CMake Presets integration in Visual Studio and Visual Studio Code is still in preview. We’ll continue to add to our integration and address your feedback in future release of Visual Studio and the CMake Tools extension for VS Code.</p>
<p>In Visual Studio, the best way to file a bug or suggest a feature is with the <strong>Send Feedback</strong> button in the upper right-hand corner of the IDE. See <a href="https://docs.microsoft.com/en-us/visualstudio/ide/feedback-options?view=vs-2019#:~:text=In%20Visual%20Studio%2C%20choose%20the%20feedback%20icon%20in,information%2C%20see%20Suggest%20a%20feature%20for%20Visual%20Studio.">Visual Studio feedback options</a> for more information.</p>
<p>In VS Code, the best way to file a bug or suggest a feature is by creating (or upvoting) an issue in the <a href="https://github.com/microsoft/vscode-cmake-tools/issues">extension’s GitHub repository</a>.</p>
<p>We’d love to learn how your team is adopting CMake Presets, for Azure Sphere or otherwise. If you have feedback or a success story to share, you can contact us at <a href="mailto:cmake@microsoft.com">cmake@microsoft.com</a>. You can also reach us on Twitter (<a href="https://twitter.com/visualc">@VisualC</a>).</p>
<p>The post <a rel="nofollow" href="https://devblogs.microsoft.com/cppblog/preview-of-using-cmake-presets-for-azure-sphere-development/">Preview of using CMake Presets for Azure Sphere development</a> appeared first on <a rel="nofollow" href="https://devblogs.microsoft.com/cppblog">C++ Team Blog</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://devblogs.microsoft.com/cppblog/preview-of-using-cmake-presets-for-azure-sphere-development/feed/</wfw:commentRss>
			<slash:comments>1</slash:comments>
		
		
			</item>
		<item>
		<title>C++20 Ranges are complete in Visual Studio 2019 version 16.10</title>
		<link>https://devblogs.microsoft.com/cppblog/c20-ranges-are-complete-in-visual-studio-2019-version-16-10/</link>
					<comments>https://devblogs.microsoft.com/cppblog/c20-ranges-are-complete-in-visual-studio-2019-version-16-10/#comments</comments>
		
		<dc:creator><![CDATA[Casey Carter]]></dc:creator>
		<pubDate>Wed, 26 May 2021 17:21:00 +0000</pubDate>
				<category><![CDATA[C++]]></category>
		<guid isPermaLink="false">https://devblogs.microsoft.com/cppblog/?p=26348</guid>

					<description><![CDATA[<p>We are proud to announce completion of our implementation of C++20 Ranges in the Standard Library in the VS2019 v16.10 release under/std:c++latest. We announced the first useful user-visible parts of Ranges in VS 2019 v16.6 in mid 2020, the trickle accelerated into a gushing stream,</p>
<p>The post <a rel="nofollow" href="https://devblogs.microsoft.com/cppblog/c20-ranges-are-complete-in-visual-studio-2019-version-16-10/">C++20 Ranges are complete in Visual Studio 2019 version 16.10</a> appeared first on <a rel="nofollow" href="https://devblogs.microsoft.com/cppblog">C++ Team Blog</a>.</p>
]]></description>
										<content:encoded><![CDATA[<p>We are proud to announce completion of our implementation of C++20 Ranges in the Standard Library in the VS2019 v16.10 release under<code>/std:c++latest</code>. We <a href="https://devblogs.microsoft.com/cppblog/initial-support-for-c20-ranges/">announced the first useful user-visible parts of Ranges in VS 2019 v16.6 in mid 2020</a>, the trickle accelerated into a gushing stream, and the final parts are now in place. This represents a huge body of work with input from multiple open-source contributors over the last two years.</p>
<p>Ironically enough, ranges are nothing new to the Standard Library. STL algorithms have always operated on ranges of elements whose bounds are denoted by an iterator that denotes the first element and an iterator pointing past the end of the sequence of elements subject to a computation. The novelty in C++20 Ranges is that we recognize the expressive power that comes from passing ranges around directly as abstractions instead of passing iterator pairs – eliminating passing iterators into different ranges as a source of errors – and that operations on ranges can compose more easily than operations on their elements.</p>
<h2 id="what-components-comprise-the-c20-ranges-design">What components comprise the C++20 Ranges design?</h2>
<p>Ranges first relaxes the old C++ iterator-pair design by allowing the sentinel that denotes the end of a sequence of elements to have a different type than the iterator that denotes the beginning. This enables expression of simple notions like a range bounded by a pointer-to-character and a delimiter sentinel that compares equal to a pointer-to-character when the pointer points to <code>'\0'</code>. A Range is then any expression <code>meow</code> such that <code>std::ranges::begin(meow)</code> and <code>std::ranges::end(meow)</code> return an iterator and a sentinel.</p>
<p>The Ranges library expresses predicates over types (“is this a bidirectional iterator?”) and relationships between types (“is this a valid iterator-and-sentinel pair?”) using C++ Concepts. Ranges is the first use – and quite an extensive use, at that – of the new Concepts language feature in the C++ Standard Library. Concepts are nicely expressive in that they allow the specification of type requirements, and to a lesser extent preconditions on the values of arguments, to appear directly in code as syntax instead of appearing in documentation as English prose. (See <a href="https://devblogs.microsoft.com/cppblog/c20-concepts-are-here-in-visual-studio-2019-version-16-3/">“C++20 Concepts Are Here in Visual Studio 2019 version 16.3”</a> for more discussion of C++ Concepts.)</p>
<p>Ranges adds a set of algorithms – mirrors of the algorithms defined in namespace <code>std</code> – in namespace <code>std::ranges</code>. These algorithms are constrained with Concepts, and unlike their siblings in <code>std</code> accept both range arguments, and iterator-sentinel pair arguments where the sentinel and iterator types differ.</p>
<p>Ranges also unsurprisingly adds a slew of ranges to the Standard Library. The Standard splits these out into factories that create ranges:</p>
<ul>
<li><code>std::views::iota(0, 42)</code> is the range of integers from 0 up to but not including 42,</li>
<li><code>std::views::istream_view&lt;int&gt;(std::cin)</code> is a range of whitespace-delimited integers read from <code>std::cin</code>,</li>
</ul>
<p>and adaptors that transform the elements of an underlying range into a new range:</p>
<ul>
<li><code>std::views::filter(my_vec, [](const auto&amp; x) { return x % 2 == 0; })</code> is a range of only the even elements of <code>my_vec</code>,</li>
<li><code>std::views::transform(my_vec, [](const auto&amp; x) { return 3 * x; })</code> is a range of elements with value 3k where k is the value of the corresponding element of <code>my_vec</code>.</li>
</ul>
<p>The range adaptors are often best thought of as lazy, composable algorithms since they do no work until you begin to iterate over them and they are functions from ranges to ranges. We could compose the above two examples into:</p>
<pre class="prettyprint">auto r1 = std::views::filter(my_vec, [](const auto&amp; x) { return x % 2 == 0; });
auto r2 = std::views::transform(r1, [](const auto&amp; x) { return 3 * x; });
</pre>
<p>for example, to get a range consisting of elements whose value is three times the value of the even elements of <code>my_vec</code>. The design even provides a pipeline syntax to facilitate this composition, using <code>|</code> to provide a left-hand range as input to a right-hand range adaptor:</p>
<pre class="prettyprint">auto r = my_vec
       | std::views::filter([](const auto&amp; x) { return x % 2 == 0; })
       | std::views::transform([](const auto&amp; x) { return 3 * x; });
</pre>
<p>Doing the equivalent work with algorithms would require storing intermediate and final results in some kind of container, which an adaptor composition like this avoids by working element-at-a-time.</p>
<h2 id="where-did-this-implementation-come-from">Where did this implementation come from?</h2>
<p>A typical STL feature is described by a 10-20 page proposal that WG21 polishes into a specification to merge into the C++ Standard. <a href="https://wg21.link/p0896r4">P0896R4 “The One Ranges Proposal”</a> was around 230 pages. As if that weren’t enough, <a href="https://github.com/microsoft/STL/issues/39">our tracking issue for Ranges implementation</a> documents a litany of 22 follow-up proposals (design changes) and 35 LWG issues (bug fixes) that are covered in the Ranges implementation. <a href="https://github.com/microsoft/STL/issues/39#issuecomment-599807825">Our implementation plan</a> broke the work down into bitesize pieces starting with “Implement common_reference and common_type change” from May 13 2019, one of four internal PRs from before the STL became open-source, through another <a href="https://github.com/microsoft/STL/pulls?q=is%3Apr+label%3Aranges">99 GitHub pull requests</a> ending in <a href="https://github.com/microsoft/STL/pull/1748">“Define __cpp_lib_ranges [feature-test macro]” on Mar 18 2021</a>. While we certainly drew from experience prototyping the library for the Ranges Technical Specification to provide guidance, the STL implementation was almost entirely a full rewrite reusing only some test cases.</p>
<p>This is certainly the largest single Standard Library feature to-date, and we can’t express enough how much we appreciate all the work from the many members of the C++ community that helped bring it to life. We’d like to personally thank <a href="https://github.com/AdamBucior/">AdamBucior</a>, <a href="https://github.com/ahanamuk/">ahanamuk</a>, <a href="https://github.com/barcharcraz/">barcharcraz</a>, <a href="https://github.com/BillyONeal/">BillyONeal</a>, <a href="https://github.com/bkentel/">bkentel</a>, <a href="https://github.com/CaseyCarter/">CaseyCarter</a>, <a href="https://github.com/cbezault/">cbezault</a>, <a href="https://github.com/cpplearner/">cpplearner</a>, <a href="https://github.com/fsb4000/">fsb4000</a>, <a href="https://github.com/futuarmo/">futuarmo</a>, <a href="https://github.com/MahmoudGSaleh/">MahmoudGSaleh</a>, <a href="https://github.com/miscco/">miscco</a>, <a href="https://github.com/mnatsuhara/">mnatsuhara</a>, <a href="https://github.com/statementreply/">statementreply</a>, <a href="https://github.com/StephanTLavavej/">StephanTLavavej</a>, <a href="https://github.com/SuperWig/">SuperWig</a>, and <a href="https://github.com/timsong-cpp/">timsong-cpp</a>, each of whom contributed either code, code review comments, or issue reports for MSVC Ranges. On a personal note, my Ranges journey started six years ago this month at the WG21 meeting in Lenexa, Kansas. As an unemployed enthusiast C++ aficionado very excited about the design in <a href="https://wg21.link/n4128">Eric Niebler’s N4128 “Ranges for the Standard Library,”</a> I never would have believed that I’d spend the next six years working on that design through the standardization process right up through today’s shipping product.</p>
<h2 id="can-i-try-it-today">Can I try it today?</h2>
<p>Yes, that’s the point! Please give the available components a try, and we’ll keep them coming. Don’t forget to download (or update to) <a href="https://visualstudio.microsoft.com/vs/">Visual Studio 2019 version 16.10</a>; some but not all of the Ranges design is present in earlier releases. Be aware that WG21 is <a href="https://github.com/cplusplus/LEWG/wiki/Backports">processing some breaking changes for C++20</a>, three of which have bearing directly on Ranges. You can expect changes to (1)<code> std::ranges::split_view</code> / <code>std::views::split</code>, which WG21 has largely redesigned since publishing C++20, (2) <code>std::ranges::join_view</code> / <code>std::views::join</code>, which has been tweaked to be usable in more cases, and (3) the <code>std::ranges::view</code> concept itself will lose its requirement for default construction allowing range adaptors to more efficiently adapt underlying ranges that aren’t default constructible by producing a result view that is not default constructible.</p>
<p>We love to hear your feedback and suggestions. We can be reached via the comments below, <a href="https://developercommunity.visualstudio.com/spaces/8/index.html">Developer Community</a>, and Twitter (<a href="https://twitter.com/visualc">@VisualC</a>). For issues and questions specific to the STL or our Ranges implementation, the best way to reach is by <a href="https://github.com/microsoft/STL/issues">filing an issue on GitHub</a>.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>The post <a rel="nofollow" href="https://devblogs.microsoft.com/cppblog/c20-ranges-are-complete-in-visual-studio-2019-version-16-10/">C++20 Ranges are complete in Visual Studio 2019 version 16.10</a> appeared first on <a rel="nofollow" href="https://devblogs.microsoft.com/cppblog">C++ Team Blog</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://devblogs.microsoft.com/cppblog/c20-ranges-are-complete-in-visual-studio-2019-version-16-10/feed/</wfw:commentRss>
			<slash:comments>1</slash:comments>
		
		
			</item>
		<item>
		<title>How to start using registries with vcpkg</title>
		<link>https://devblogs.microsoft.com/cppblog/how-to-start-using-registries-with-vcpkg/</link>
					<comments>https://devblogs.microsoft.com/cppblog/how-to-start-using-registries-with-vcpkg/#respond</comments>
		
		<dc:creator><![CDATA[Nicole Mazzuca]]></dc:creator>
		<pubDate>Mon, 24 May 2021 18:46:41 +0000</pubDate>
				<category><![CDATA[C++]]></category>
		<guid isPermaLink="false">https://devblogs.microsoft.com/cppblog/?p=28108</guid>

					<description><![CDATA[<p>For many users of vcpkg, the built-in repository of packages is completely sufficient. If you only need public, non-experimental libraries, the default vcpkg registry is completely fine. However, once you go outside of this world &#8211; once you have company-internal libraries,</p>
<p>The post <a rel="nofollow" href="https://devblogs.microsoft.com/cppblog/how-to-start-using-registries-with-vcpkg/">How to start using registries with vcpkg</a> appeared first on <a rel="nofollow" href="https://devblogs.microsoft.com/cppblog">C++ Team Blog</a>.</p>
]]></description>
										<content:encoded><![CDATA[<p>For many users of vcpkg, the built-in repository of packages is completely sufficient. If you only need public, non-experimental libraries, the default vcpkg registry is completely fine. However, once you go outside of this world &#8211; once you have company-internal libraries, or you want to use experimental libraries, the recommended solution is to use a registry.</p>
<p>Quite a few people have already set up their own registries, and if you want to learn to set up your own, you can check out the <a href="https://devblogs.microsoft.com/cppblog/registries-bring-your-own-libraries-to-vcpkg/">last blogpost</a>. However, if you want to use an existing registry, this tutorial is for you.</p>
<p>We also have <a href="https://github.com/microsoft/vcpkg/blob/master/docs/users/registries.md">reference documentation in the vcpkg repository</a>.</p>
<p>&nbsp;</p>
<h3 id="getting-started">Getting Started</h3>
<p>Before anything else, you&#8217;ll need a vcpkg installation, and you&#8217;ll need to decide whether you&#8217;re using manifest mode or classic mode (in other words, installing packages manually using the command line). The use of registries is the same either way.</p>
<p>You&#8217;ll want to create a <code>vcpkg-configuration.json</code> file; in manifest mode, you&#8217;d place it alongside your <code>vcpkg.json</code> file, while in classic mode you&#8217;d place it in the vcpkg root directory. There are two important keys in this file: <code>"default-registry"</code>, and <code>"registries"</code>.</p>
<p><code>"default-registry"</code> allows you to set the fallback registry, for packages that aren&#8217;t covered by any of the registries in the <code>"registries"</code> array. <code>"registries"</code> allows you to set up registries for specific packages.</p>
<p>&nbsp;</p>
<h3 id="example-north-wind-traders">Example: North Wind Traders</h3>
<p>Your company, North Wind Traders, has decided to mirror the default vcpkg registry (from <a href="https://github.com/microsoft/vcpkg">https://github.com/microsoft/vcpkg</a>) in order to ensure business continuity and control of sources for purposes of security, and you&#8217;ve set it up as your default registry so that it&#8217;s used for every package that isn&#8217;t explicitly listed in a package registry. Your <code>vcpkg-configuration.json</code> file should look like this:</p>
<pre><code>{
  "default-registry": {
    "kind": "git",
    "repository": "https://github.com/northwindtraders/vcpkg-mirror",
    "baseline": "eefee7408133f3a0fef711ef9c6a3677b7e06fd7"
  },
  "registries": [
    {
      "kind": "git",
      "repository": "https://github.com/northwindtraders/vcpkg-registry",
      "baseline": "dacf4de488094a384ca2c202b923ccc097956e0c",
      "packages": [ "beison", "beicode" ]
    }
  ]
}
</code></pre>
<p>You also depend on your private registry for two of your internal libraries: beison and beicode. These libraries are neither open source nor public, but they are still managed via vcpkg, and you don&#8217;t have to be concerned about different processes for different libraries (at least at the consumption side). With manifests, you write your dependencies down, and the CMake or MSBuild integration will install all of those dependencies into your project, whether from the default, built-in registry, or from third-party registries. Private dependencies are exactly the same as public dependencies, as far as vcpkg is concerned. For classic mode, you tell vcpkg to install the packages you need from the command line. vcpkg will install them into the vcpkg git repository you’ve cloned, and you can access them either via direct usage or via the CMake and MSBuild integration. These existing use cases all &#8220;just work&#8221;, without any extra work from you on top of existing workflows. All you need is a configuration file.</p>
<p>&nbsp;</p>
<h3 id="give-us-your-feedback">Give us your feedback!</h3>
<p>Try out vcpkg by visiting our <a href="https://github.com/microsoft/vcpkg">GitHub repo</a>.</p>
<p>This is a relatively new feature, and the user experience is still being actively worked on. We want to create the best and simplest experience possible for our users, and so we welcome your feedback on this new feature in our <a href="https://github.com/microsoft/vcpkg/issues/new">issue tracker</a>!</p>
<p>The current up-to-date documentation on using registries can be found in <a href="https://github.com/microsoft/vcpkg/blob/master/docs/users/registries.md">our GitHub repository</a>.</p>
<p>The post <a rel="nofollow" href="https://devblogs.microsoft.com/cppblog/how-to-start-using-registries-with-vcpkg/">How to start using registries with vcpkg</a> appeared first on <a rel="nofollow" href="https://devblogs.microsoft.com/cppblog">C++ Team Blog</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://devblogs.microsoft.com/cppblog/how-to-start-using-registries-with-vcpkg/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>All vcpkg enterprise features now generally available: versioning, binary caching, manifests and registries</title>
		<link>https://devblogs.microsoft.com/cppblog/all-vcpkg-enterprise-features-now-generally-available-versioning-binary-caching-manifests-and-registries/</link>
					<comments>https://devblogs.microsoft.com/cppblog/all-vcpkg-enterprise-features-now-generally-available-versioning-binary-caching-manifests-and-registries/#comments</comments>
		
		<dc:creator><![CDATA[Augustin Popa]]></dc:creator>
		<pubDate>Wed, 19 May 2021 23:38:07 +0000</pubDate>
				<category><![CDATA[C++]]></category>
		<guid isPermaLink="false">https://devblogs.microsoft.com/cppblog/?p=28092</guid>

					<description><![CDATA[<p>We are announcing today that all major vcpkg enterprise features are no longer experimental. The latest vcpkg release makes versioning, binary caching, manifests and registries generally available to any developer, team or enterprise.<br />
We have steadily been adding to vcpkg over the years.</p>
<p>The post <a rel="nofollow" href="https://devblogs.microsoft.com/cppblog/all-vcpkg-enterprise-features-now-generally-available-versioning-binary-caching-manifests-and-registries/">All vcpkg enterprise features now generally available: versioning, binary caching, manifests and registries</a> appeared first on <a rel="nofollow" href="https://devblogs.microsoft.com/cppblog">C++ Team Blog</a>.</p>
]]></description>
										<content:encoded><![CDATA[<p><!--StartFragment --></p>
<p><span class="cf0">We are announcing today that <strong>all major vcpkg enterprise features are no longer experimental</strong>. The latest vcpkg release makes versioning, binary caching, manifests and registries generally available to any developer, team or enterprise. </span></p>
<p>We have steadily been adding to vcpkg over the years. What started as a small open source project to migrate developers to newer versions of Visual Studio has expanded into a cross-platform C/C++ library manager with over 1600 libraries that can be used in a wide variety of environments to serve the entire C/C++ ecosystem.</p>
<p>In this blog post, we go over the latest vcpkg product announcements, particularly for those of you who missed them at the <a href="https://www.youtube.com/watch?v=tiWYy2EsSNU">Pure Virtual C++ conference</a> earlier this month. We are <strong>announcing the general availability of vcpkg versioning and registries</strong>, which, combined with our earlier release of manifests and binary caching, comprise our solution for <strong>vcpkg in the enterprise space</strong>. These features are free and are now on by default in the tool, no longer requiring feature flags to be manually turned on to opt in.</p>
<p>While we believe all developers can benefit from these four features, we believe they will be especially useful to professional developers who previously would have avoided adopting vcpkg without them.</p>
<p>Lastly, we are happy to announce that vcpkg has a new website and mark!</p>
<p>&nbsp;</p>
<h3 id="versioning-and-registries-no-longer-experimental">Versioning and Registries No Longer Experimental</h3>
<p>The vcpkg team has also been expanding the capabilities of the tool in response to popular user feedback. Most recently, we announced four new features:</p>
<ol>
<li><a href="https://github.com/microsoft/vcpkg/blob/master/docs/users/binarycaching.md"><strong>Binary caching</strong></a>, to save copies of prebuilt library binaries that can be restored on demand from a network file share, NuGet feed, or cloud binary storage solution. With this feature, you can build your dependencies once, and only once, then cache them for faster subsequent acquisition on other machines, containers, or continuous integration runs.</li>
<li><a href="https://github.com/microsoft/vcpkg/blob/master/docs/users/manifests.md"><strong>Manifests</strong></a>, making it possible to declare dependencies in a vcpkg.json file that can be maintained in source control and that automatically integrates with MSBuild and CMake projects. Simply run an MSBuild compilation or generate a CMake cache to automatically restore missing dependencies.</li>
<li><a href="https://github.com/microsoft/vcpkg/blob/master/docs/users/versioning.md"><strong>Versioning</strong></a>, to set libraries to be acquired at specific versions and lock them there.</li>
<li><a href="https://github.com/microsoft/vcpkg/blob/master/docs/users/registries.md"><strong>Registries</strong></a>, to bring your own libraries to vcpkg, whether they are forks of open source libraries available in the public catalog or other custom libraries (including private organization-only dependencies).</li>
</ol>
<p>When we announced versioning and registries, we pointed out that the features were considered experimental, as we wanted to take some more time to check the quality and listen to user feedback. Now, we are ready to state that <strong>versioning and registries are no longer experimental</strong>. While we will continue improving the features described above, we are confident enough to recommend using them in production environments. Please continue to submit feedback to us in the form of bug reports as <a href="https://github.com/microsoft/vcpkg/issues">GitHub Issues</a> and feature suggestions by starting a <a href="https://github.com/microsoft/vcpkg/discussions">GitHub Discussion</a>.</p>
<p>&nbsp;</p>
<h3 id="new-vcpkg-website-and-mark">New vcpkg Website and Mark</h3>
<p>We are proud to <strong>announce </strong><a href="https://vcpkg.io/"><strong>vcpkg.io</strong></a><strong>, our new website</strong>!</p>
<p><a href="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2021/05/vcpkg.io-website.png"><img class="alignnone size-full wp-image-28094" src="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2021/05/vcpkg.io-website.png" alt="vcpkg.io website homepage" width="936" height="570" srcset="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2021/05/vcpkg.io-website.png 936w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2021/05/vcpkg.io-website-300x183.png 300w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2021/05/vcpkg.io-website-768x468.png 768w" sizes="(max-width: 936px) 100vw, 936px" /></a></p>
<p>You can use the website to learn about vcpkg and how to get started, browse our documentation, and even explore available packages on our package search page:</p>
<p><a href="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2021/05/vcpkg.io-browse-packages-page.png"><img class="alignnone size-full wp-image-28095" src="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2021/05/vcpkg.io-browse-packages-page.png" alt="vcpkg.io browse packages page" width="936" height="450" srcset="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2021/05/vcpkg.io-browse-packages-page.png 936w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2021/05/vcpkg.io-browse-packages-page-300x144.png 300w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2021/05/vcpkg.io-browse-packages-page-768x369.png 768w" sizes="(max-width: 936px) 100vw, 936px" /></a></p>
<p>On the website, you will notice our new, freshly-designed <strong>vcpkg product mark</strong>!</p>
<p><a href="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2021/05/vcpkg-product-mark.png"><img class="size-full wp-image-28096 aligncenter" src="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2021/05/vcpkg-product-mark.png" alt="Image vcpkg product mark" width="278" height="278" srcset="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2021/05/vcpkg-product-mark.png 278w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2021/05/vcpkg-product-mark-150x150.png 150w" sizes="(max-width: 278px) 100vw, 278px" /></a></p>
<p>Lovingly referred to by our team as the “potato chip logo”, this mark will be used to identify vcpkg wherever it goes on the web.</p>
<p>&nbsp;</p>
<h3 id="vcpkg-2021-04-30-and-2021-05-12-releases">vcpkg 2021.04.30 and 2021.05.12 Releases</h3>
<p>We completed <a href="https://github.com/microsoft/vcpkg/releases">two releases on GitHub for vcpkg</a> in the past few weeks. Our overall port count increased to 1,667, and we updated over 800 ports since our last release. We also added substantial new documentation, including for versioning, registries, manifests, and binary caching. We also <strong>turned registries and versioning on by default</strong>, so you no longer need to specify a feature flag to use them.</p>
<p>&nbsp;</p>
<h3 id="we-want-your-feedback">We Want Your Feedback!</h3>
<p>If you depend on C or C++ libraries for your project, you should give vcpkg a try by visiting our website, <a href="https://vcpkg.io/">vcpkg.io</a>. You can use vcpkg to install libraries from source, whether they are your own or popular open source projects You can follow the project and engage with us on the <a href="https://github.com/microsoft/vcpkg/releases">vcpkg GitHub repo</a>. The features discussed in this post were made possible thanks to your feedback, and we are always interested to hear what you think!</p>
<p>The post <a rel="nofollow" href="https://devblogs.microsoft.com/cppblog/all-vcpkg-enterprise-features-now-generally-available-versioning-binary-caching-manifests-and-registries/">All vcpkg enterprise features now generally available: versioning, binary caching, manifests and registries</a> appeared first on <a rel="nofollow" href="https://devblogs.microsoft.com/cppblog">C++ Team Blog</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://devblogs.microsoft.com/cppblog/all-vcpkg-enterprise-features-now-generally-available-versioning-binary-caching-manifests-and-registries/feed/</wfw:commentRss>
			<slash:comments>3</slash:comments>
		
		
			</item>
		<item>
		<title>Microsoft C++ Code Analysis supports SARIF 2.1</title>
		<link>https://devblogs.microsoft.com/cppblog/microsoft-c-code-analysis-supports-sarif-2-1/</link>
					<comments>https://devblogs.microsoft.com/cppblog/microsoft-c-code-analysis-supports-sarif-2-1/#respond</comments>
		
		<dc:creator><![CDATA[Hwi-sung Im]]></dc:creator>
		<pubDate>Thu, 13 May 2021 19:40:53 +0000</pubDate>
				<category><![CDATA[C++]]></category>
		<category><![CDATA[Diagnostics]]></category>
		<category><![CDATA[code analysis]]></category>
		<category><![CDATA[Rule Action]]></category>
		<category><![CDATA[Ruleset]]></category>
		<category><![CDATA[SARIF]]></category>
		<guid isPermaLink="false">https://devblogs.microsoft.com/cppblog/?p=28068</guid>

					<description><![CDATA[<p>Starting with Visual Studio 16.8, MSVC Code Analysis officially supports SARIF 2.1.0 standard. SARIF is an industry standard for representing static analysis logs and we&#8217;ve been one of the earliest collaborators with the SARIF Technical Committee. Behind the scenes, analysis log files in the SARIF format powers Visual Studio IDE to provide a richer experience that was not possible with the legacy XML logs.</p>
<p>The post <a rel="nofollow" href="https://devblogs.microsoft.com/cppblog/microsoft-c-code-analysis-supports-sarif-2-1/">Microsoft C++ Code Analysis supports SARIF 2.1</a> appeared first on <a rel="nofollow" href="https://devblogs.microsoft.com/cppblog">C++ Team Blog</a>.</p>
]]></description>
										<content:encoded><![CDATA[<p><span data-contrast="none">Starting with Visual Studio 16.8, MSVC Code Analysis officially supports SARIF 2.1.0 standard. SARIF is an industry standard for representing static analysis logs and we&#8217;ve been one of the earliest collaborators with the SARIF Technical Committee.</span><span data-contrast="auto"> Behind the scenes, analysis log files in the SARIF format powers Visual Studio IDE to provide a richer experience that was not possible with the legacy XML logs. In this blog post we will present one of those enhanced experiences – </span><span data-contrast="auto">code analysis defects with different severity levels </span><span data-contrast="auto">in Error List and </span><span data-contrast="auto">color-coded squiggles </span><span data-contrast="auto">for offending code segments.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:0,&quot;335559740&quot;:240}"> </span></p>
<p><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:0,&quot;335559740&quot;:240}"> </span></p>
<h1 aria-level="1" aria-level="1" id="what-is-sarif"><span data-contrast="none">What is SARIF?</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559738&quot;:240,&quot;335559739&quot;:0,&quot;335559740&quot;:259}"> </span></h1>
<p><span data-contrast="auto">SARIF is an acronym for the Static Analysis Results Interchange Format, which is a standard, JSON-based format for the output of static analysis tools. SARIF provides a rich format intended to meet the needs of a wide range of analysis tools, both sophisticated and simple ones. It also provides an extensibility mechanism to allow tool authors to store custom data that the SARIF format doesn&#8217;t directly support.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:259}"> </span></p>
<p><span data-contrast="auto">You can find more information on SARIF at </span><a href="https://sarifweb.azurewebsites.net/#:~:text=The%20Static%20Analysis%20Results%20Interchange,approved%20as%20an%20OASIS%20standard"><span data-contrast="none">this</span></a><span data-contrast="auto"> introductory page. The latest SARIF standard is available at </span><a href="https://www.oasis-open.org/committees/tc_home.php?wg_abbrev=sarif"><span data-contrast="none">this</span></a><span data-contrast="auto"> page.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:259}"> </span></p>
<h1 aria-level="1" aria-level="1" id="c-code-analysis-and-sarif"><span data-contrast="none">C++ Code Analysis and SARIF</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559738&quot;:240,&quot;335559739&quot;:0,&quot;335559740&quot;:259}"> </span></h1>
<p><span data-contrast="auto">MSVC Code Analysis has been using a custom XML log format to report defects it finds during code analysis. While this has served customers well for the last decade, we decided to support SARIF for richer capability such as logging list of files analyzed, configuration overrides for analysis, location where defects are suppressed if logging suppressed warnings, etc.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:259}"> </span></p>
<p><span data-contrast="none">We have been supporting SARIF in VS for quite some time, even the earliest drafts of the specification. 16.8 is the release that MSVC Code Analysis supports SARIF 2.1 standard.</span><span data-contrast="auto"> With this update, MSVC Code Analysis provided some enhanced experience that many readers may already know, including but not limited to:</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:259}"> </span></p>
<ul>
<li data-leveltext="" data-font="Symbol" data-listid="4" aria-setsize="-1" data-aria-posinset="16" data-aria-level="1"><span data-contrast="auto">Background code analysis</span><span data-ccp-props="{&quot;134233279&quot;:true,&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:259}"> </span></li>
<li data-leveltext="" data-font="Symbol" data-listid="4" aria-setsize="-1" data-aria-posinset="16" data-aria-level="1"><span data-contrast="auto">Green squiggles for code analysis defects</span><span data-ccp-props="{&quot;134233279&quot;:true,&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:259}"> </span></li>
<li data-leveltext="" data-font="Symbol" data-listid="4" aria-setsize="-1" data-aria-posinset="16" data-aria-level="1"><span data-contrast="auto">Fix-it for automatic recommendations to fix defects</span><span data-ccp-props="{&quot;134233279&quot;:true,&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:259}"> </span></li>
</ul>
<p><span data-contrast="auto">To add more improvements to code analysis, we have updated MSVC Code Analysis to support the latest SARIF 2.1.0 standard. At the same time, it has been updated to provide options to record more information to the SARIF log file:</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:259}"> </span></p>
<ul>
<li data-leveltext="" data-font="Symbol" data-listid="2" aria-setsize="-1" data-aria-posinset="16" data-aria-level="1"><span data-contrast="auto">List of files analyzed </span><span data-ccp-props="{&quot;134233279&quot;:true,&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:259}"> </span></li>
<li data-leveltext="" data-font="Symbol" data-listid="2" aria-setsize="-1" data-aria-posinset="16" data-aria-level="1"><span data-contrast="auto">Configurations used for code analysis, including command-line options</span><span data-ccp-props="{&quot;134233279&quot;:true,&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:259}"> </span></li>
<li data-leveltext="" data-font="Symbol" data-listid="2" aria-setsize="-1" data-aria-posinset="16" data-aria-level="1"><span data-contrast="auto">Rule actions for each of the active rules for which defects are reported</span><span data-ccp-props="{&quot;134233279&quot;:true,&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:259}"> </span></li>
</ul>
<p><span data-contrast="auto">While we were updating MSVC Code Analysis to add more information to SARIF log files, we also added new capabilities to it:</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:259}"> </span></p>
<ul>
<li data-leveltext="" data-font="Symbol" data-listid="3" aria-setsize="-1" data-aria-posinset="17" data-aria-level="1"><span data-contrast="auto">Ability to log compiler warnings in addition to code analysis warnings</span><span data-ccp-props="{&quot;134233279&quot;:true,&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:259}"> </span></li>
</ul>
<ul>
<li data-leveltext="" data-font="Symbol" data-listid="3" aria-setsize="-1" data-aria-posinset="1" data-aria-level="1"><span data-contrast="auto">Ability to log suppressed warnings with location of suppression</span><span data-ccp-props="{&quot;134233279&quot;:true,&quot;201341983&quot;:0,&quot;335551550&quot;:1,&quot;335551620&quot;:1,&quot;335559685&quot;:720,&quot;335559737&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:259,&quot;335559991&quot;:360}"> </span></li>
</ul>
<h1 aria-level="1" aria-level="1" id="rule-actions-in-visual-studio"><span data-contrast="none">Rule Actions in Visual Studio</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559738&quot;:240,&quot;335559739&quot;:0,&quot;335559740&quot;:259}"> </span></h1>
<p><span data-contrast="auto">As we update MSVC Code Analysis with support of the latest SARIF standard and additional information on analysis and defects, we also updated Visual Studio to enhance the code analysis experience. </span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:259}"> </span></p>
<p><span data-contrast="auto">In the following sections, let’s look at an enhanced code analysis experience in Visual Studio IDE.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:259}"> </span></p>
<h2 aria-level="1" aria-level="1" id="ruleset-and-rule-actions"><span data-contrast="none">Ruleset and Rule Actions</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559738&quot;:240,&quot;335559739&quot;:0,&quot;335559740&quot;:259}"> </span></h2>
<p><span data-contrast="auto">MSVC Code Analysis can be used with one or more ruleset files that can enable or disable selected rules. Rules that are enabled in the ruleset are checked and reported by the analysis tools. Rules that are disabled in a ruleset will be ignored by MSVC Code Analysis and will not be checked or reported. More information on rulesets can be found </span><a href="https://docs.microsoft.com/en-us/visualstudio/code-quality/using-rule-sets-to-group-code-analysis-rules"><span data-contrast="none">here</span></a><span data-contrast="auto">.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:259}"> </span></p>
<p><span data-contrast="auto">Each of the rules in the ruleset file can be assigned with one of the following “Rule Action” values:</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:259}"> </span></p>
<table data-tablestyle="MsoTableGrid" data-tablelook="1184" aria-rowcount="7">
<tbody>
<tr aria-rowindex="1">
<td data-celllook="65536"><b><span data-contrast="auto">Rule Action</span></b><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:259}"> </span></td>
<td data-celllook="65536"><b><span data-contrast="auto">Description</span></b><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:259}"> </span></td>
</tr>
<tr aria-rowindex="2">
<td data-celllook="0"><span data-contrast="auto">None</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:259}"> </span></td>
<td data-celllook="0"><span data-contrast="auto">Do not check or report</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:259}"> </span></td>
</tr>
<tr aria-rowindex="3">
<td data-celllook="0"><span data-contrast="auto">Hidden</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:259}"> </span></td>
<td data-celllook="0"><span data-contrast="auto">May check, but do not report</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:259}"> </span></td>
</tr>
<tr aria-rowindex="4">
<td data-celllook="0"><span data-contrast="auto">Default</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:259}"> </span></td>
<td data-celllook="0"><span data-contrast="auto">Inherit default action from &lt;Include&gt; or &lt;IncludeAll&gt;</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:259}"> </span></td>
</tr>
<tr aria-rowindex="5">
<td data-celllook="0"><span data-contrast="auto">Info</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:259}"> </span></td>
<td data-celllook="0"><span data-contrast="auto">Report as Informational</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:259}"> </span></td>
</tr>
<tr aria-rowindex="6">
<td data-celllook="0"><span data-contrast="auto">Warning</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:259}"> </span></td>
<td data-celllook="0"><span data-contrast="auto">Report as Warning</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:259}"> </span></td>
</tr>
<tr aria-rowindex="7">
<td data-celllook="0"><span data-contrast="auto">Error</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:259}"> </span></td>
<td data-celllook="0"><span data-contrast="auto">Report as Error</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:259}"> </span></td>
</tr>
</tbody>
</table>
<p><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:259}"> </span></p>
<p><span data-contrast="auto">Until we added support for SARIF, MSVC Code Analysis could only map these rule actions simply to “enabled” or “disabled” states, and either reported or ignored until it was added with the support for SARIF. Visual Studio build used ruleset files directly and could differentiate rules with “Error” Rule Action from the reset of the enabled rules, which were considered as “Warning” regardless of their Rule Action values. Visual Studio IDE did not honor the Rule Action values, and treated everything as “Warning”.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:259}"> </span></p>
<p><span data-contrast="auto">With the support of SARIF, MSVC Code Analysis now maps these rule actions to the SARIF’s level property in the log file as follows:</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:259}"> </span></p>
<table data-tablestyle="MsoTableGrid" data-tablelook="1184" aria-rowcount="6">
<tbody>
<tr aria-rowindex="1">
<td data-celllook="65536"><b><span data-contrast="auto">Rule Action</span></b><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:259}"> </span></td>
<td data-celllook="65536"><b><span data-contrast="auto">SARIF level property</span></b><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:259}"> </span></td>
</tr>
<tr aria-rowindex="2">
<td data-celllook="0"><span data-contrast="auto">None</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:259}"> </span></td>
<td data-celllook="0"><span data-contrast="auto">none</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:259}"> </span></td>
</tr>
<tr aria-rowindex="3">
<td data-celllook="0"><span data-contrast="auto">Hidden</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:259}"> </span></td>
<td data-celllook="0"><span data-contrast="auto">none</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:259}"> </span></td>
</tr>
<tr aria-rowindex="4">
<td data-celllook="0"><span data-contrast="auto">Info</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:259}"> </span></td>
<td data-celllook="0"><span data-contrast="auto">note</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:259}"> </span></td>
</tr>
<tr aria-rowindex="5">
<td data-celllook="0"><span data-contrast="auto">Warning</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:259}"> </span></td>
<td data-celllook="0"><span data-contrast="auto">warning</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:259}"> </span></td>
</tr>
<tr aria-rowindex="6">
<td data-celllook="0"><span data-contrast="auto">Error</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:259}"> </span></td>
<td data-celllook="0"><span data-contrast="auto">error</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:259}"> </span></td>
</tr>
</tbody>
</table>
<p><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:259}"> </span></p>
<p><span data-contrast="auto">A rule with Rule Action value of “default” will be assigned with one of the other Rule Action values before mapped to the SARIF’s level.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:259}"> </span></p>
<h2 aria-level="1" aria-level="1" id="rule-actions-in-action"><span data-contrast="none">Rule Actions in Action</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559738&quot;:240,&quot;335559739&quot;:0,&quot;335559740&quot;:259}"> </span></h2>
<p><span data-contrast="auto">Let’s look at how Visual Studio now uses the Rule Action values in the ruleset to improve the code analysis experience. As an example, let’s consider a custom ruleset with the following content:</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:259}"> </span></p>
<pre class="prettyprint">&lt;?xml version="1.0" encoding="utf-8"?&gt; 
&lt;RuleSet Name="Copy of Microsoft Native Recommended Rules" Description="My custom rules" ToolsVersion="16.0"&gt; 
  &lt;Rules AnalyzerId="Microsoft.Analyzers.NativeCodeAnalysis" RuleNamespace="Microsoft.Rules.Native"&gt; 
    &lt;Rule Id="C6001" Action="Warning" /&gt; 
    &lt;Rule Id="C6011" Action="Error" /&gt; 
    &lt;Rule Id="C6201" Action="None" /&gt; 
    &lt;Rule Id="C6385" Action="Info" /&gt; 
    &lt;Rule Id="C6386" Action="Info" /&gt; 
  &lt;/Rules&gt; 
&lt;/RuleSet&gt;</pre>
<p><span data-contrast="auto">And a *.cpp file with following test code:</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:240}"> </span></p>
<pre class="prettyprint">#pragma warning(disable:4700)
  
void foo()
{ 
    int arr[4]{}; 
    int v = arr[4]; // C6201, C6385 
    arr[4] = 2;     // C6201, C6386 

    int x; 
    int* py = nullptr; 
    int y = *py;    // C6011 
    y += x;         // C6001 
}</pre>
<p><span data-contrast="auto">When configured to use the above custom ruleset for analysis, analyzing the test code in Visual Studio produces results as shown in below screenshot:</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:259}"> </span></p>
<p><a href="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2021/05/Untitled-1.png"><img class="alignnone wp-image-28070" src="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2021/05/Untitled-1-300x173.png" alt="Image Untitled" width="791" height="456" srcset="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2021/05/Untitled-1-300x173.png 300w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2021/05/Untitled-1-1024x592.png 1024w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2021/05/Untitled-1-768x444.png 768w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2021/05/Untitled-1.png 1293w" sizes="(max-width: 791px) 100vw, 791px" /></a></p>
<p><span data-contrast="auto">Please note how the defects are listed in the Error List window, and how their corresponding code segments are highlighted in the text editor window:</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:259}"> </span></p>
<ul>
<li data-leveltext="" data-font="Symbol" data-listid="3" aria-setsize="-1" data-aria-posinset="1" data-aria-level="1"><span data-contrast="auto">In the Error List window, C6011 is listed as an Error, C6001 as a Warning,  and C6385 and C6386 as Messages.</span><span data-ccp-props="{&quot;134233279&quot;:true,&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:259}"> </span></li>
</ul>
<ul>
<li data-leveltext="" data-font="Symbol" data-listid="3" aria-setsize="-1" data-aria-posinset="1" data-aria-level="1"><span data-contrast="auto">In the text editor window, code segment for C6011 is highlighted with red squiggle, C6001 with green squiggle, and C6385 and C6386 with gray squiggles (dots)</span><span data-ccp-props="{&quot;134233279&quot;:true,&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:259}"> </span></li>
</ul>
<p><span data-contrast="auto">As you can see in the above example, rule actions in the ruleset maps to Visual Studio build output, Error List, and text editor display through the level property of SARIF as follows:</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:259}"> </span></p>
<table data-tablestyle="MsoNormalTable" data-tablelook="1184" aria-rowcount="7">
<tbody>
<tr aria-rowindex="1">
<td data-celllook="69905"><b><span data-contrast="auto">Rule Action</span></b><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335551550&quot;:2,&quot;335551620&quot;:2,&quot;335559740&quot;:240}"> </span></td>
<td data-celllook="69905"><b><span data-contrast="auto">SARIF level</span></b><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335551550&quot;:2,&quot;335551620&quot;:2,&quot;335559740&quot;:240}"> </span></td>
<td data-celllook="69905"><b><span data-contrast="auto">Build Output</span></b><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335551550&quot;:2,&quot;335551620&quot;:2,&quot;335559740&quot;:240}"> </span></td>
<td data-celllook="69905"><b><span data-contrast="auto">Error List</span></b><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335551550&quot;:2,&quot;335551620&quot;:2,&quot;335559740&quot;:240}"> </span></td>
<td data-celllook="69905"><b><span data-contrast="auto">Editor Display</span></b><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335551550&quot;:2,&quot;335551620&quot;:2,&quot;335559740&quot;:240}"> </span></td>
</tr>
<tr aria-rowindex="2">
<td data-celllook="4369"><span data-contrast="auto">Error</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:240}"> </span></td>
<td data-celllook="4369"><span data-contrast="auto">error</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:240}"> </span></td>
<td data-celllook="4369"><span data-contrast="auto">Appear as </span><i><span data-contrast="auto">Errors</span></i><span data-contrast="auto"> in the output window. These cause the build to fail.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:240}"> </span></td>
<td data-celllook="4369"><span data-contrast="auto">Appear as </span><i><span data-contrast="auto">Errors</span></i><span data-contrast="auto"> in the Error List.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:240}"> </span></td>
<td data-celllook="4369"><span data-contrast="auto">Offending code is underlined with a red squiggle and marked by a small red box in the scroll bar.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:240}"> </span></td>
</tr>
<tr aria-rowindex="3">
<td data-celllook="4369"><span data-contrast="auto">Warning</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:240}"> </span></td>
<td data-celllook="4369"><span data-contrast="auto">warning</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:240}"> </span></td>
<td data-celllook="4369"><span data-contrast="auto">Appear as </span><i><span data-contrast="auto">Warnings</span></i><span data-contrast="auto"> in the output window. These do not cause the build to fail.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:240}"> </span></td>
<td data-celllook="4369"><span data-contrast="auto">Appear as </span><i><span data-contrast="auto">Warnings</span></i><span data-contrast="auto"> in the Error List.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:240}"> </span></td>
<td data-celllook="4369"><span data-contrast="auto">Offending code is underlined with a green squiggle and marked by a small green box in the scroll bar.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:240}"> </span></td>
</tr>
<tr aria-rowindex="4">
<td data-celllook="4369"><span data-contrast="auto">Info</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:240}"> </span></td>
<td data-celllook="4369"><span data-contrast="auto">note</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:240}"> </span></td>
<td data-celllook="4369"><span data-contrast="auto">Appear as </span><i><span data-contrast="auto">Warnings</span></i><span data-contrast="auto"> in the build output. These do not cause the build to fail.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:240}"> </span></td>
<td data-celllook="4369"><span data-contrast="auto">Appear as </span><i><span data-contrast="auto">Messages</span></i><span data-contrast="auto"> in the Error List.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:240}"> </span></td>
<td data-celllook="4369"><span data-contrast="auto">Offending code is underlined with a gray squiggle and marked by a small gray box in the scroll bar.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:240}"> </span></td>
</tr>
<tr aria-rowindex="5">
<td data-celllook="4369"><span data-contrast="auto">Hidden</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:240}"> </span></td>
<td data-celllook="4369"><span data-contrast="auto">none</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:240}"> </span></td>
<td data-celllook="4369"><span data-contrast="auto">Not reported</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:240}"> </span></td>
<td data-celllook="4369"><span data-contrast="auto">Not reported</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:240}"> </span></td>
<td data-celllook="4369"><span data-contrast="auto">Not reported</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:240}"> </span></td>
</tr>
<tr aria-rowindex="6">
<td data-celllook="4369"><span data-contrast="auto">None</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:240}"> </span></td>
<td data-celllook="4369"><span data-contrast="auto">none</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:240}"> </span></td>
<td data-celllook="4369"><span data-contrast="auto">Not reported</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:240}"> </span></td>
<td data-celllook="4369"><span data-contrast="auto">Not reported</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:240}"> </span></td>
<td data-celllook="4369"><span data-contrast="auto">Not reported</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:240}"> </span></td>
</tr>
<tr aria-rowindex="7">
<td data-celllook="4369"><span data-contrast="auto">Default</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:240}"> </span></td>
<td data-celllook="4369"><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:240}"> </span></td>
<td colspan="3" data-celllook="4369"><span data-contrast="auto">Corresponds to the default action of the rule.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559740&quot;:240}"> </span></td>
</tr>
</tbody>
</table>
<p><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:259}"> </span></p>
<p><span data-contrast="auto">Please note that rules with Rule Action value of “Info” is also reported as “Warning” in the Visual Studio build output window. This has been the behavior before the adoption of SARIF log format. Following our guiding principle of keeping minimal friction for our customers during Visual Studio upgrades, we kept this behavior as is to not change the build behavior of existing projects. Please share your feedback on this for future improvements – whether it should be updated to honor the Rule Action value of “Info” and reported as “Note” or something like that.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:259}"> </span></p>
<h1 aria-level="1" aria-level="1" id="send-us-feedback"><span data-contrast="none">Send Us Feedback</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559738&quot;:240,&quot;335559739&quot;:0,&quot;335559740&quot;:259}"> </span></h1>
<p><span data-contrast="none">Please download </span><a href="https://visualstudio.microsoft.com/vs/preview/"><span data-contrast="none">the latest Visual Studio 2019</span></a><span data-contrast="none"> and give it a try! Any feedback is welcome. We can be reached via the comments below, </span><a href="https://developercommunity.visualstudio.com/spaces/8/index.html"><span data-contrast="none">Developer Community</span></a><span data-contrast="none">, email (</span><a href="mailto:visualcpp@microsoft.com"><span data-contrast="none">visualcpp@microsoft.com</span></a><span data-contrast="none">), and Twitter (</span><a href="https://twitter.com/visualc"><span data-contrast="none">@VisualC</span></a><span data-contrast="none">).</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:259}"> </span></p>
<p>The post <a rel="nofollow" href="https://devblogs.microsoft.com/cppblog/microsoft-c-code-analysis-supports-sarif-2-1/">Microsoft C++ Code Analysis supports SARIF 2.1</a> appeared first on <a rel="nofollow" href="https://devblogs.microsoft.com/cppblog">C++ Team Blog</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://devblogs.microsoft.com/cppblog/microsoft-c-code-analysis-supports-sarif-2-1/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
	</channel>
</rss>
