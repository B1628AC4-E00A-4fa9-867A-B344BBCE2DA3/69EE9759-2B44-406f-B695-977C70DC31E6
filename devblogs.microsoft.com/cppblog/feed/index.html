<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>C++ Team Blog</title>
	<atom:link href="https://devblogs.microsoft.com/cppblog/feed/" rel="self" type="application/rss+xml" />
	<link>https://devblogs.microsoft.com/cppblog/</link>
	<description>The latest in C++, Visual Studio, VS Code, and vcpkg from the MSFT C++ team</description>
	<lastBuildDate>Fri, 03 May 2024 16:12:41 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	

<image>
	<url>https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2018/10/Microsoft-Favicon.png</url>
	<title>C++ Team Blog</title>
	<link>https://devblogs.microsoft.com/cppblog/</link>
	<width>32</width>
	<height>32</height>
</image> 
	<item>
		<title>New Checks Since Visual Studio 2022 17.8</title>
		<link>https://devblogs.microsoft.com/cppblog/new-checks-since-visual-studio-2022-17-8/</link>
					<comments>https://devblogs.microsoft.com/cppblog/new-checks-since-visual-studio-2022-17-8/#comments</comments>
		
		<dc:creator><![CDATA[Gabor Horvath]]></dc:creator>
		<pubDate>Fri, 03 May 2024 16:10:22 +0000</pubDate>
				<category><![CDATA[C++]]></category>
		<category><![CDATA[Diagnostics]]></category>
		<category><![CDATA[New Feature]]></category>
		<guid isPermaLink="false">https://devblogs.microsoft.com/cppblog/?p=34061</guid>

					<description><![CDATA[<p>The C++ team is committed to making your C++ coding experience as safe as possible. In the last couple of releases, we added new safety checks based on the requests of internal customers like the Windows group. Below is the overview of the new checks.</p>
<p>The post <a href="https://devblogs.microsoft.com/cppblog/new-checks-since-visual-studio-2022-17-8/">New Checks Since Visual Studio 2022 17.8</a> appeared first on <a href="https://devblogs.microsoft.com/cppblog">C++ Team Blog</a>.</p>
]]></description>
										<content:encoded><![CDATA[<p>The C++ team is committed to making your C++ coding experience as safe as possible. In the last couple of releases, we added new safety checks based on the requests of internal customers like the Windows group. Below is the overview of the new checks. For additional information for each of the checks, please refer to the linked help documents.</p>
<h1 id="c6395-helping-migration-to-c17-and-above">C6395: Helping migration to C++17 and above</h1>
<p>Consider the following snippet:</p>
<pre>a[++i] = i;</pre>
<p>The meaning of the code depends on the order in which we evaluate the subexpressions. In case we evaluate the left-hand side of the assignment first, the code stores the incremented value of i into the array. Otherwise, it stores the original value before the increment. Before C++17, the order of evaluation in this expression is unspecified, and the write and the read of i are not sequenced, resulting in undefined behavior. Starting in C++17 the evaluation order is standardized, and it does not match what MSVC had pre-C++17. As a result, MSVC has a different evaluation order depending on the language mode. A new rule help find cases where changing the language mode will change the meaning of the program.</p>
<h1 id="checks-to-find-typos">Checks to find typos</h1>
<p>The next checks will find common cases where a typo results in code that compiles but the behavior is probably not what the author intended.</p>
<h2 id="c6392-error-prone-stream-usage">C6392: Error-prone stream usage</h2>
<p>What does the following program do?</p>
<pre>#include &lt;iostream&gt;

int main() {
     std::cout &lt;&lt; L"Foo\n";
}</pre>
<p>In this snippet, the string literal will decay to a pointer that points to the beginning of the literal. This pointer points to a wide string. While wcout can print wide strings, cout cannot. The operator&lt;&lt; of std::basic_ostream has an overload that takes a void* argument. The compiler will pick that overload and the user will see the address of the literal on the terminal. This problem can be easily fixed by using wcout or a nonwide string.</p>
<p><a href="https://aka.ms/cpp/warnings/C6392">C6392</a> to the rescue, it will find cases where the code inadvertently prints an address instead of the value of a string. In case printing the address is intentional, an explicit cast to void* will make the intent explicit and suppress the warning.</p>
<h2 id="c6396-error-prone-sizeof-usage">C6396: Error-prone sizeof usage</h2>
<p>The following code snippet has a typo in the argument of the sizeof operator, and as a result it does incorrect offset calculations:</p>
<pre>#define SOMESTRUCT_ERRNO_THAT_MATTERS 0x8000000d

typedef struct {
               int a;
               bool b;
} SOMESTRUCT_THAT_MATTERS;

if (somedata.length &gt;= sizeof(SOMESTRUCT_ERRNO_THAT_MATTERS))  {
    /// Do something
}</pre>
<p><a href="https://aka.ms/cpp/warnings/C6396">C6396</a> finds typos like this where the argument of sizeof is an integral constant.</p>
<h2 id="c6397-bogus-pointer-comparison-to-null">C6397: Bogus pointer comparison to null</h2>
<p>The address-of operator returns the address of its operand. This value should never be compared to nullptr.</p>
<ul>
<li>The address-of a field can only be nullptr if the base pointer was nullptr and the field is at the zero offset (&amp;p-&gt;field == nullptr implies p == nullptr). In this case, the expression should be simplified.</li>
<li>In any other cases, the value of the unary &amp; operator can&#8217;t be nullptr unless there&#8217;s undefined behavior in the code. &amp;v == nullptr always evaluates to false.</li>
</ul>
<p><a href="https://aka.ms/cpp/warnings/C6397">C6397</a> finds typos where &amp; was inadvertently added to null-checking code.</p>
<h1 id="find-interlockedcompareexchange-misuse">Find InterlockedCompareExchange misuse</h1>
<h2 id="c26735-comparand-value-read-from-destination-location-twice">C26735: Comparand value read from destination location twice</h2>
<p>The <a href="https://learn.microsoft.com/en-us/windows/win32/api/winnt/nf-winnt-interlockedcompareexchange">InterlockedCompareExchange</a> function and its derivatives such as <a href="https://learn.microsoft.com/en-us/windows/win32/api/winnt/nf-winnt-interlockedcompareexchangepointer">InterlockedCompareExchangePointer</a> perform an atomic compare-and-exchange operation on the specified values. It is not hard to use these functions, but unfortunately optimizations performed by the compiler can produce machine instructions that were not obvious from the source code. Sometimes, the comparand value that is meant to be read just once from the destination location and used multiple times can really be read multiple times through the optimized machine instructions. Here is an example code:</p>
<pre>#include &lt;Windows.h&gt;

bool TryLock(__int64* plock)
{
    __int64 lock = *plock;
    return (lock &amp; 1) &amp;&amp;
        _InterlockedCompareExchange64(plock, lock &amp; ~1, lock) == lock;
}</pre>
<p>It seems like we are reading the value of *plock just once. However, when compiled by MSVC with /O1 option, this source code will turn into machine instructions that read the value of *plock multiple times, which makes use of InterlockedCompareExchange pointless.</p>
<p>Please refer to the online help document for the for more details of how this can happen, what consequences of the generated machine instructions might be, and how the source code can be fixed.</p>
<p><a href="https://learn.microsoft.com/en-us/cpp/code-quality/c26837">C26837</a> finds above mentioned potential misuses of InterlockedCompareExchange and its derivatives in source code.</p>
<h1 id="leap-year-checks">Leap year checks</h1>
<p>A few leap-day mishandling checks have been added to 17.8. Among these leap year related rules, rules are “opt-in” rules, meaning that code analysis should use a ruleset file, and the rules should be explicitly included in the ruleset file, and enabled for them to be applied. For more information on creating a custom ruleset for code analysis, please refer to <a href="https://learn.microsoft.com/en-us/cpp/code-quality/using-rule-sets-to-specify-the-cpp-rules-to-run?view=msvc-170">Use Rule Sets to Specify the C++ Rules to Run</a>.</p>
<h2 id="c6393-c6394-containers-with-insufficient-storage">C6393 / C6394: Containers with insufficient storage</h2>
<p>It is common to use data structures that are indexed by the day of the year. If those data structures have only 365 elements, the code has a bug. Leap years have 366 days. <a href="https://aka.ms/cpp/warnings/C6393">C6393</a> will find data structures like vectors that are constant and initialized to 365 elements. This warning can falsely flag some code where the size of the data structure is not related to the days of the year, it is merely a coincidence. <a href="https://aka.ms/cpp/warnings/C6394">C6394</a> is a stricter version of this check that also warns on variables that are not const.</p>
<h2 id="c26861-modifying-field-of-date-time-object-without-leap-year-check">C26861: Modifying field of date-time object without leap year check</h2>
<p>If one or more of the year, month, or day fields of a date or a date-time object are changed directly without proper leap year validation, the resultant date or date-time object can become invalid. For example, incrementing a year of a date-time object whose year-month-day fields represent a leap-day will make the resulting date-time object invalid.</p>
<p><a href="https://learn.microsoft.com/en-us/cpp/code-quality/c26861">C26861</a> finds direct modifications to year, month, or day field of a date-time object when there is no leap year checking before or after the modification.</p>
<h2 id="c26862-incomplete-conversion-of-date-time-objects">C26862: Incomplete conversion of date-time objects</h2>
<p>There are many date-time object types, and there is a need to convert from a date-time object of one type to a date-time object of another type. Unfortunately, different date-time object types may use different year, month, or day bases. For example, SYSTEMTIME struct uses a 0-based year, but 1-based month and day fields. On the other hand, tm struct uses a 1900-based year, a 0-based month, and a 1-based day. To convert an object of one of these types to an object of another type, the year, month, and day fields must be adjusted appropriately.</p>
<p><a href="https://learn.microsoft.com/en-us/cpp/code-quality/c26862">C26862</a> finds incomplete conversion between objects of SYSTEMTIME and tm structures.</p>
<h2 id="c26863-ignored-return-value-from-date-time-handling-function">C26863: Ignored return value from date-time handling function</h2>
<p>Some functions that create or handle date-time objects return values indicating success or failure. It&#8217;s important to verify the return value of such a function, especially without proper leap year handling. Otherwise, the function may have failed, and execution continues with an output value containing invalid data.</p>
<p><a href="https://learn.microsoft.com/en-us/cpp/code-quality/c26863">C26863</a> finds ignored return values from a set of known date-time handling functions when there is no leap year checking.</p>
<h2 id="c26864-day-field-manipulation-assuming-365-days-per-year">C26864: Day field manipulation assuming 365 days per year</h2>
<p>It is a subset of C26861, specifically looking for modifications of the day field of date-time object assuming there are 365 days in all years. To advance a date-time object by a year, either calculate the correct number of days to advance through checking leap year or advance the year field directly and adjust the resultant date-time per leap year rule.</p>
<p><a href="https://learn.microsoft.com/en-us/cpp/code-quality/c26864">C26864</a> finds manipulations of date-time objects assuming 365 days per year.</p>
<h1 id="conclusion">Conclusion</h1>
<p>Recent releases of Visual Studio 2022 feature many new checks in our code analysis tools. Give it a try and let us know what you think. The work that we do is heavily influenced by the feedback we receive on the <a href="https://developercommunity.visualstudio.com/cpp">Developer Community</a>. Please file feedback tickets and let us know if there is a check that you would like to see added. Stay tuned for more C++ static analysis blogs. In the meanwhile, do not hesitate to reach out to us. We can be reached via the comments below or <a href="https://twitter.com/visualc">@VisualC</a> on X.</p>
<p>The post <a href="https://devblogs.microsoft.com/cppblog/new-checks-since-visual-studio-2022-17-8/">New Checks Since Visual Studio 2022 17.8</a> appeared first on <a href="https://devblogs.microsoft.com/cppblog">C++ Team Blog</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://devblogs.microsoft.com/cppblog/new-checks-since-visual-studio-2022-17-8/feed/</wfw:commentRss>
			<slash:comments>2</slash:comments>
		
		
			</item>
		<item>
		<title>OpenMP improvements in Visual Studio C/C++ compiler: triangular loop collapse</title>
		<link>https://devblogs.microsoft.com/cppblog/openmp-improvements-in-visual-studio-c-c-compiler-triangular-loop-collapse/</link>
					<comments>https://devblogs.microsoft.com/cppblog/openmp-improvements-in-visual-studio-c-c-compiler-triangular-loop-collapse/#respond</comments>
		
		<dc:creator><![CDATA[Vadim Paretsky]]></dc:creator>
		<pubDate>Tue, 30 Apr 2024 18:00:01 +0000</pubDate>
				<category><![CDATA[C++]]></category>
		<category><![CDATA[Experimental]]></category>
		<category><![CDATA[OpenMP]]></category>
		<guid isPermaLink="false">https://devblogs.microsoft.com/cppblog/?p=33823</guid>

					<description><![CDATA[<p>Our previous blog post about OpenMP support in Visual Studio announced support for the loop collapse feature in version 17.8. <br />
In the meantime, we have continued working on improving the feature and, in Visual Studio 2022 17.10, we have added a new,</p>
<p>The post <a href="https://devblogs.microsoft.com/cppblog/openmp-improvements-in-visual-studio-c-c-compiler-triangular-loop-collapse/">OpenMP improvements in Visual Studio C/C++ compiler: triangular loop collapse</a> appeared first on <a href="https://devblogs.microsoft.com/cppblog">C++ Team Blog</a>.</p>
]]></description>
										<content:encoded><![CDATA[<p><span data-contrast="auto">Our <a href="https://devblogs.microsoft.com/cppblog/open-mp-improvements-in-visual-studio-cpp">previous blog post</a> about OpenMP support in Visual Studio announced support for the loop <code>collapse</code> feature in version 17.8.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:0,&quot;335559740&quot;:240}"> </span></p>
<p><span data-contrast="auto">In the meantime, we have continued working on improving the feature and, in Visual Studio 2022 17.10, we have added a new, more efficient algorithm for partitioning work of certain types of collapsed triangular loops supported by the OpenMP Standard 5.2. All this work continues to be accessible if you are using the <code>-openmp:llvm</code> switch (see the <a href="https://devblogs.microsoft.com/cppblog/improved-openmp-support-for-cpp-in-visual-studio/">Improved OpenMP Support for C++ in Visual Studio</a> blogpost for details about this switch). In this blog we will describe this algorithm in some detail:</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:0,&quot;335559740&quot;:240}"> </span></p>
<h2 id="triangular-loops-in-openmp-5-2"><span data-contrast="auto">Triangular loops in OpenMP 5.2</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:0,&quot;335559740&quot;:240}"> </span></h2>
<p><span data-contrast="auto">In the most recent OpenMP Standard 5.2, inner loops&#8217; lower and upper bounds can depend on outer loops&#8217; induction variables, making the loop space non-rectangular. For example, a double nested loop case like this:</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:0,&quot;335559740&quot;:240}"> </span></p>
<pre class="prettyprint language-default"><code class="language-default">void bar(float *a, int i, int j); 
void foo(float *a) 
{ 
  #pragma omp parallel for collapse(2) 
  for (int i = 0; i &lt; M; i++) 
    for (int j = i; j &lt; M; j++)  
      bar(a, i, j); 
} </code><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:0,&quot;335559740&quot;:240}"> </span></pre>
<p><span data-contrast="none">Since a triangular loop space makes only one half of the corresponding rectangular loop space, using the rectangular space partitioning algorithm for distributing the work would be functionally correct, but only 50% efficient</span><span data-contrast="auto">. To approach 100% efficiency, we have added a separate algorithm to handle collapsed triangular loops which considers only the applicable half of the rectangular space. Our current implementation covers only certain types of triangular loops, specifically double nested lower (both excluding and including the diagonal) and upper equilateral triangular one-increment loops described below. However, this could be extended to cover a wider range of triangular loop types.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:0,&quot;335559740&quot;:240}"> </span></p>
<p><span data-contrast="auto">We begin by identifying a supported nested loop case by calling a new function <code>kmp_identify_nested_loop_structure</code> from <code>__kmpc_for_collapsed_init</code>.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:0,&quot;335559740&quot;:240}"> </span></p>
<pre class="prettyprint language-default"><code class="language-default">/************************************************************************** 
 * Identify nested loop structure - loops come in the canonical form 
 * Lower triangle matrix: i = 0; i &lt;= M; i++        {0,0}:{M,0} 
 *                        j = 0; j &lt;= 0/-1+1*i; j++ {0,0}:{0/-1,1} 
 * Upper Triangle matrix 
 *                        i = 0;     i &lt;= M; i++    {0,0}:{M,0} 
 *                        j = 0+1*i; j &lt;= M; j++    {0,1}:{M,0} 
 * ************************************************************************/ 
nested_loop_type_t 
kmp_identify_nested_loop_structure(/*in*/ bounds_info_t *original_bounds_nest, 
                                   /*in*/ kmp_index_t n) </code></pre>
<p><span data-contrast="auto">If the loop in question is of a supported type, we call the corresponding function, i.e. <code>kmp_handle_lower_triangle_matrix</code> or <code>kmp_handle_upper_triangle_matrix</code>, to handle work partitioning, with each of these functions returning the chunk assigned to the current thread for execution.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:0,&quot;335559740&quot;:240}"> </span></p>
<p><span data-contrast="auto">We first describe the algorithm that handles the case of a lower triangular loop that excludes the diagonal, i.e.:</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:0,&quot;335559740&quot;:240}"> </span></p>
<pre class="prettyprint language-default"><code class="language-default">#pragma omp parallel for collapse(2) 
for (int i = 0; i &lt; M; i++) 
    for (int j = 0; j &lt; i; j++) { 
        //... 
    } </code></pre>
<p><span data-contrast="auto">For this case, the total number of iterations in the combined loop space will be <code>T=M*(M-1)/2</code>, and the most efficient work distribution between <code>N</code> threads will be for each of them to receive a chunk of <code>T/N</code> iterations, with the first <code>T%N</code> threads getting one iteration extra. We assign chunks of combined space iterations to threads sequentially. The chunk for thread <code>n</code> begins at the (0-based) iteration number equal to the number of iterations executed by all the previous threads <code>A=n*T/N</code> and ends at <code>A+T/N</code>. </span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:0,&quot;335559740&quot;:240}"> </span></p>
<p><span data-contrast="auto">We then translate <code>A</code> into the <code>{Is,Js}</code> tuple describing the chunk’s start iteration. <code>Is</code> is the biggest such outer loop iteration that satisfies the condition <code>(Is-1)*Is/2 &lt;= A =&gt; Is^2-Is-2A &lt;= 0</code>. We then solve <code>Is^2-Is-2A = 0</code> for <code>Is</code>, i.e., <code>Is = (sqrt(1+8*A)-1)/2</code>. <code>Js</code> is then the remaining number of inner loop iterations required to reach <code>A</code>, i.e. <code>Js =A-Is*(Is-1)</code>. We then apply the same approach to translate <code>A+T/N</code> into the <code>{Ie,Je}</code> tuple describing the chunk’s end iteration. This tuple pair represents the work assigned to thread <code>n</code> and is given back to it for execution.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:0,&quot;335559740&quot;:240}"> </span></p>
<p><span data-contrast="auto">To avoid the use of floating-point arithmetic, we use an additional function <code>sqrt_newton_approx</code> to calculate <code>sqrt</code> using the Newton method. The method is iterative, and since the chunk calculation rounds the result down to the nearest integer, we can limit its precision to 0.1 to reduce the number of iterations. The method converges quickly, with less than 10 iterations to achieve the result for M values below 10^3, and less than 20 iterations for M values below 10^9.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:0,&quot;335559740&quot;:240}"> </span></p>
<p><span data-contrast="auto">The use of rounding in calculating chunk boundaries may introduce the risk of missing or duplicate iterations when dividing thread work. However, our implementation does not carry such risk since the same algorithm with the same inputs is used to calculate both the end iteration of thread <code>n</code> chunk and the start iteration of thread <code>n+1</code></span><span data-contrast="auto"> chunk. This ensures the absence of gaps and overlaps between threads.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:0,&quot;335559740&quot;:240}"> </span></p>
<p><span data-contrast="auto">We now consider a lower triangle loop that includes the diagonal, i.e.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:0,&quot;335559740&quot;:240}"> </span></p>
<pre class="prettyprint language-default"><code class="language-default">#pragma omp parallel for collapse(2) 
for (int i = 0; i &lt; M; i++) 
    for (int j = 0; j &lt;= i; j++) { 
       //... 
    }</code></pre>
<p><span data-contrast="auto">For this case we can employ the same approach as above, with the main difference that <code>T=M*(M+1)/2</code> instead of <code>T=M*(M-1)/2</code> and the subsequent <code>Is</code> conditions are similarly <code>(Is+1)*Is</code> rather than <code>(Is-1)*Is</code>. <code>kmp_handle_lower_triangle_matrix</code> handles this simple difference by parameterizing calculations based on the loop description.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:0,&quot;335559740&quot;:240}"> </span></p>
<p><span data-contrast="auto">We now consider an upper triangular loop, i.e.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:0,&quot;335559740&quot;:240}"> </span></p>
<pre class="prettyprint language-default"><code class="language-default">#pragma omp parallel for collapse(2) 
for (int i = 0; i &lt; M; i++) 
    for (int j = i; j &lt; M; j++) { 
       //... 
    } </code></pre>
<p><span data-contrast="auto">This loop is a flipped case of the lower triangular loop including the diagonal. <code>kmp_handle_upper_triangle_matrix</code> thus follows the same algorithm as <code>kmp_handle_lower_triangle_matrix</code> for the lower triangular loop that includes the diagonal and then simply flips the result back to the upper triangular case.  With some further parameterization, these two functions could be combined into one, but we decided to keep them separate for code clarity.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:0,&quot;335559740&quot;:240}"> </span></p>
<p><span data-contrast="auto">While the performance benefits of the improved handling for these triangular loop types will always depend on the nature and size of the underlying workload, including its micro-architectural behavior, our tests show that the new code achieves the perfect distribution of the supported triangular loops workload between threads, giving the expected up to 2x performance benefit on simulated perfectly scaling workloads.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:0,&quot;335559740&quot;:240}"> </span></p>
<h2 id="feedback"><span data-contrast="auto">Feedback</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:0,&quot;335559740&quot;:240}"> </span></h2>
<p><span data-contrast="auto">We encourage you to try this new code in Visual Studio 2022 version 17.10 or newer. It has also been up-streamed into LLVM (https://github.com/llvm/llvm-project/pull/83939). As always, we welcome your feedback which we could use to continue improving the loop collapse feature. Please share your thoughts, comments and questions with us through <a href="https://developercommunity.visualstudio.com/home">Developer Community</a>. You can also reach us on X <a href="https://twitter.com/visualc">@VisualC</a>, or via email at visualcpp@microsoft.com.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:0,&quot;335559740&quot;:240}"> </span></p>
<p>The post <a href="https://devblogs.microsoft.com/cppblog/openmp-improvements-in-visual-studio-c-c-compiler-triangular-loop-collapse/">OpenMP improvements in Visual Studio C/C++ compiler: triangular loop collapse</a> appeared first on <a href="https://devblogs.microsoft.com/cppblog">C++ Team Blog</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://devblogs.microsoft.com/cppblog/openmp-improvements-in-visual-studio-c-c-compiler-triangular-loop-collapse/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>Pure Virtual C++ 2024 is Now Live!</title>
		<link>https://devblogs.microsoft.com/cppblog/pure-virtual-cpp-2024-is-now-live/</link>
					<comments>https://devblogs.microsoft.com/cppblog/pure-virtual-cpp-2024-is-now-live/#respond</comments>
		
		<dc:creator><![CDATA[Sy Brand]]></dc:creator>
		<pubDate>Tue, 30 Apr 2024 14:55:42 +0000</pubDate>
				<category><![CDATA[Announcement]]></category>
		<category><![CDATA[Pure Virtual C++]]></category>
		<guid isPermaLink="false">https://devblogs.microsoft.com/cppblog/?p=34106</guid>

					<description><![CDATA[<p>Pure Virtual C++, our free one-day virtual conference for the whole C++ community, is now live! Check it out on YouTube:</p>
<p>The sessions are:</p>
<p>Automated Testing of Shader Code with Keith Stockdale (Rare) &#8211; 15:00 UTC<br />
Message Handling with Boolean Implication with Ben Deane (Intel) &#8211;</p>
<p>The post <a href="https://devblogs.microsoft.com/cppblog/pure-virtual-cpp-2024-is-now-live/">Pure Virtual C++ 2024 is Now Live!</a> appeared first on <a href="https://devblogs.microsoft.com/cppblog">C++ Team Blog</a>.</p>
]]></description>
										<content:encoded><![CDATA[<p><a href="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/03/pvclogo.png"><img decoding="async" class="aligncenter size-full wp-image-33787" src="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/03/pvclogo.png" alt="Image pvclogo" width="680" height="181" srcset="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/03/pvclogo.png 680w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/03/pvclogo-300x80.png 300w" sizes="(max-width: 680px) 100vw, 680px" /></a></p>
<p>Pure Virtual C++, our free one-day virtual conference for the whole C++ community, is now live! Check it out on YouTube:</p>
<p><iframe title="YouTube video player" src="https://www.youtube.com/embed/H6GQUg5JquU?si=umINx1GLQDaQFsuk" width="560" height="315" frameborder="0" allowfullscreen="allowfullscreen"></iframe></p>
<p>The sessions are:</p>
<ul>
<li><strong>Automated Testing of Shader Code with Keith Stockdale</strong> (Rare) &#8211; 15:00 UTC</li>
<li><strong>Message Handling with Boolean Implication with Ben Deane </strong>(Intel) &#8211; 15:30 UTC</li>
<li><strong>I Embedded a Programming Language In Debug Information with Sy Brand</strong> (Microsoft) &#8211; 16:00 UTC</li>
<li><strong>Enhancing C++ development with Copilot Chat with Sinem Akinci</strong> (Microsoft) &#8211; 16:30 UTC</li>
<li><strong>Progress Report: Adopting Header Units in Microsoft Word with Zachary Henkel</strong> (Microsoft) &#8211; 17:00 UTC</li>
</ul>
<p>The post <a href="https://devblogs.microsoft.com/cppblog/pure-virtual-cpp-2024-is-now-live/">Pure Virtual C++ 2024 is Now Live!</a> appeared first on <a href="https://devblogs.microsoft.com/cppblog">C++ Team Blog</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://devblogs.microsoft.com/cppblog/pure-virtual-cpp-2024-is-now-live/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>Pure Virtual C++ 2024 is Tomorrow</title>
		<link>https://devblogs.microsoft.com/cppblog/pure-virtual-c-2024-is-tomorrow/</link>
					<comments>https://devblogs.microsoft.com/cppblog/pure-virtual-c-2024-is-tomorrow/#respond</comments>
		
		<dc:creator><![CDATA[Sy Brand]]></dc:creator>
		<pubDate>Mon, 29 Apr 2024 15:06:24 +0000</pubDate>
				<category><![CDATA[Announcement]]></category>
		<category><![CDATA[Pure Virtual C++]]></category>
		<guid isPermaLink="false">https://devblogs.microsoft.com/cppblog/?p=34094</guid>

					<description><![CDATA[<p>Pure Virtual C++ is our free one-day virtual conference for the whole C++ community. This year it will run on April 30th 15:00 UTC. Sign-up for free to get access to our five sessions on the day.<br />
The sessions are:</p>
<p>Automated Testing of Shader Code with Keith Stockdale (Rare) &#8211;</p>
<p>The post <a href="https://devblogs.microsoft.com/cppblog/pure-virtual-c-2024-is-tomorrow/">Pure Virtual C++ 2024 is Tomorrow</a> appeared first on <a href="https://devblogs.microsoft.com/cppblog">C++ Team Blog</a>.</p>
]]></description>
										<content:encoded><![CDATA[<p><a href="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/03/pvclogo.png"><img decoding="async" class="aligncenter size-full wp-image-33787" src="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/03/pvclogo.png" alt="Image pvclogo" width="680" height="181" srcset="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/03/pvclogo.png 680w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/03/pvclogo-300x80.png 300w" sizes="(max-width: 680px) 100vw, 680px" /></a></p>
<p>Pure Virtual C++ is our free one-day virtual conference for the whole C++ community. This year it will run on April 30th 15:00 UTC. <a href="https://developer.microsoft.com/en-us/reactor/events/22077/" target="_blank" rel="noopener">Sign-up for free</a> to get access to our five sessions on the day.</p>
<p>The sessions are:</p>
<ul>
<li><strong>Automated Testing of Shader Code with Keith Stockdale</strong> (Rare) &#8211; 15:00 UTC</li>
<li><strong>Message Handling with Boolean Implication with Ben Deane </strong>(Intel) &#8211; 15:30 UTC</li>
<li><strong>I Embedded a Programming Language In Debug Information with Sy Brand</strong> (Microsoft) &#8211; 16:00 UTC</li>
<li><strong>Enhancing C++ development with Copilot Chat with Sinem Akinci</strong> (Microsoft) &#8211; 16:30 UTC</li>
<li><strong>Progress Report: Adopting Header Units in Microsoft Word with Zachary Henkel</strong> (Microsoft) &#8211; 17:00 UTC</li>
</ul>
<p>We&#8217;ve added a host of new pre-conference content which you can check out in the meantime. In the last week we&#8217;ve released:</p>
<ul>
<li><a href="https://www.youtube.com/watch?v=9qz9qS-Ctuc&amp;list=PLReL099Y5nRdGvEMSX_CX8kCDv8dqekak&amp;index=9">Visualizing Memory Layout in Visual Studio &#8211; Mryam Girmay</a></li>
<li><a href="https://www.youtube.com/watch?v=oQDhnzNHl7s&amp;list=PLReL099Y5nRdGvEMSX_CX8kCDv8dqekak&amp;index=10">Include Cleanup and Diagnostics in Visual Studio &#8211; Mryam Girmay</a></li>
<li><a href="https://www.youtube.com/watch?v=FMQyHU85KHs&amp;list=PLReL099Y5nRdGvEMSX_CX8kCDv8dqekak&amp;index=11">Windows Subsystem for Linux (WSL) Acquisition in Visual Studio &#8211; Elizabeth Morrow</a></li>
<li><a href="https://www.youtube.com/watch?v=mZ4uS8_lUzM&amp;list=PLReL099Y5nRdGvEMSX_CX8kCDv8dqekak&amp;index=12">Optimizing Game Development Workflows with Visual Studio and AI &#8211; David Li and Greg Denton</a></li>
<li><a href="https://www.youtube.com/watch?v=EWDBRTWrLo4&amp;list=PLReL099Y5nRdGvEMSX_CX8kCDv8dqekak&amp;index=13">CMakePresets.json Version 6 Support in Visual Studio and VS Code &#8211; Andreea Isac</a></li>
<li><a href="https://www.youtube.com/watch?v=FTPftPgMaDY&amp;list=PLReL099Y5nRdGvEMSX_CX8kCDv8dqekak&amp;index=14">Updates to the VS Code CMake Tools Sidebar &#8211; Sneha Ramachandran and Moyo Okeremi</a></li>
</ul>
<p>The post <a href="https://devblogs.microsoft.com/cppblog/pure-virtual-c-2024-is-tomorrow/">Pure Virtual C++ 2024 is Tomorrow</a> appeared first on <a href="https://devblogs.microsoft.com/cppblog">C++ Team Blog</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://devblogs.microsoft.com/cppblog/pure-virtual-c-2024-is-tomorrow/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>Usability Improvements in the Visual Studio Connection Manager</title>
		<link>https://devblogs.microsoft.com/cppblog/usability-improvements-in-the-visual-studio-connection-manager/</link>
					<comments>https://devblogs.microsoft.com/cppblog/usability-improvements-in-the-visual-studio-connection-manager/#respond</comments>
		
		<dc:creator><![CDATA[Sneha Ramachandran]]></dc:creator>
		<pubDate>Fri, 26 Apr 2024 15:11:38 +0000</pubDate>
				<category><![CDATA[C++]]></category>
		<category><![CDATA[Connection Manager]]></category>
		<category><![CDATA[visual studio]]></category>
		<guid isPermaLink="false">https://devblogs.microsoft.com/cppblog/?p=34035</guid>

					<description><![CDATA[<p>In Visual Studio 2022 17.10 Preview 2, we’ve introduced some UX updates and usability improvements to the Connection Manager. With these updates we provide a more seamless experience when connecting to remote systems and/or debugging failed connections. Please install the latest Preview to try it out.</p>
<p>The post <a href="https://devblogs.microsoft.com/cppblog/usability-improvements-in-the-visual-studio-connection-manager/">Usability Improvements in the Visual Studio Connection Manager</a> appeared first on <a href="https://devblogs.microsoft.com/cppblog">C++ Team Blog</a>.</p>
]]></description>
										<content:encoded><![CDATA[<p><span data-contrast="none">In Visual Studio 2022 17.10 Preview 2, we’ve introduced some UX updates and usability improvements to the Connection Manager. With these updates we provide a more seamless experience when connecting to remote systems and/or debugging failed connections. Please </span><a href="https://visualstudio.microsoft.com/downloads/"><span data-contrast="none">install the latest Preview</span></a><span data-contrast="none"> to try it out. Read on to learn what the Connection Manager does, and which issues that we resolved.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:279}"> </span></p>
<h2 aria-level="1" aria-level="1" id="what-is-the-connection-manager"><span data-contrast="none">What is the Connection Manager?</span><span data-ccp-props="{&quot;134245418&quot;:true,&quot;134245529&quot;:true,&quot;201341983&quot;:0,&quot;335559738&quot;:360,&quot;335559739&quot;:80,&quot;335559740&quot;:278}"> </span></h2>
<p><span data-contrast="none">The Connection Manager is a tool in Visual Studio that allows users to manage and store SSH connections to remote systems. You can add new connections, edit existing connections, and set the default remote connection. Follow this link to learn how to use the Connection Manager to </span><a href="https://learn.microsoft.com/en-us/cpp/linux/connect-to-your-remote-linux-computer?view=msvc-170"><span data-contrast="none">connect to your target Linux system in Visual Studio</span></a><span data-contrast="none">.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:279}"> </span></p>
<p><a href="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Screenshot-2024-04-11-130859.png"><img decoding="async" class="aligncenter wp-image-34036" src="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Screenshot-2024-04-11-130859.png" alt="Screenshot of Connection Manager Tools Options page in Visual Studio Options." width="693" height="425" srcset="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Screenshot-2024-04-11-130859.png 871w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Screenshot-2024-04-11-130859-300x184.png 300w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Screenshot-2024-04-11-130859-768x471.png 768w" sizes="(max-width: 693px) 100vw, 693px" /></a></p>
<h2 aria-level="1" aria-level="1" id="prior-user-feedback"><span data-contrast="none">Prior User Feedback</span></h2>
<p><span data-contrast="none">The key issues we addressed came from feedback on the </span><b><span data-contrast="none">Connect to Remote System</span></b><span data-contrast="none"> dialog shown below, which you can access by clicking </span><b><span data-contrast="none">Add </span></b><span data-contrast="none">to add a new connection or </span><b><span data-contrast="none">Edit </span></b><span data-contrast="none">to edit an existing connection.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:279}"> </span></p>
<p><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335551550&quot;:2,&quot;335551620&quot;:2,&quot;335559739&quot;:160,&quot;335559740&quot;:279}"> <a href="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/image.png"><img decoding="async" class="aligncenter wp-image-34043" src="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/image.png" alt="Screenshot of the prior Connect to Remote System dialog with asterisks by the field labels indicating required fields and the Connect button enabled." width="436" height="425" /></a></span></p>
<p><span data-contrast="none">First, we received feedback that our UI didn’t make it clear what fields were actually required. Passwords and passphrases weren’t required but were marked as such. Additionally, the user could click </span><b><span data-contrast="none">Connect</span></b><span data-contrast="none"> without the required fields being completed.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:279}"> </span></p>
<p><span data-contrast="none">We also wanted to address feedback on how we had displayed failed connection errors to users, as shown below.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:279}"> </span></p>
<p><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335551550&quot;:2,&quot;335551620&quot;:2,&quot;335559739&quot;:160,&quot;335559740&quot;:279}"> <a href="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/New-Project.png"><img decoding="async" class="aligncenter wp-image-34044" src="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/New-Project.png" alt="Screenshot of the prior Connect to Remote System dialog in a failed connection state. The Host Name, Port, and Password fields are highlighted red and a tooltip from the Host Name field contains the error message." width="493" height="425" srcset="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/New-Project.png 657w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/New-Project-300x258.png 300w" sizes="(max-width: 493px) 100vw, 493px" /></a></span></p>
<p><span data-contrast="none">On a failed connection attempt, it was unclear to users what the error was because the error messages were somewhat hidden and multiple fields needed to be edited to hit </span><b><span data-contrast="none">Connect </span></b><span data-contrast="none">again</span><b><span data-contrast="none"> </span></b><span data-contrast="none">even if they weren’t all incorrect. </span><span data-ccp-props="{&quot;134233117&quot;:false,&quot;134233118&quot;:false,&quot;201341983&quot;:0,&quot;335551550&quot;:1,&quot;335551620&quot;:1,&quot;335559685&quot;:0,&quot;335559737&quot;:0,&quot;335559738&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:279}"> </span></p>
<h2 aria-level="1" aria-level="1" id="usability-updates-to-the-connection-manager"><span data-contrast="none">Usability Updates to the Connection Manager</span><span data-ccp-props="{&quot;134245418&quot;:true,&quot;134245529&quot;:true,&quot;201341983&quot;:0,&quot;335559738&quot;:360,&quot;335559739&quot;:80,&quot;335559740&quot;:278}"> </span></h2>
<p><span data-contrast="none">To address the issues above, we made a few improvements to the </span><b><span data-contrast="none">Connect to Remote System</span></b><span data-contrast="none"> dialog. Firstly, we replaced the asterisks with “&lt;Required&gt;” watermarks and corrected which fields were marked required, which can be seen below.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:279}"> </span></p>
<p><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335551550&quot;:2,&quot;335551620&quot;:2,&quot;335559739&quot;:160,&quot;335559740&quot;:279}"> <a href="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Screenshot-2024-04-16-123958.png"><img decoding="async" class="aligncenter wp-image-34040" src="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Screenshot-2024-04-16-123958.png" alt="Screenshot of the updated Connect To Remote System dialog with &quot;&lt;Required&gt;&quot; watermarks in the required fields and the Connect button disabled." width="435" height="425" srcset="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Screenshot-2024-04-16-123958.png 443w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Screenshot-2024-04-16-123958-300x293.png 300w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Screenshot-2024-04-16-123958-24x24.png 24w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Screenshot-2024-04-16-123958-48x48.png 48w" sizes="(max-width: 435px) 100vw, 435px" /></a></span></p>
<p><span data-contrast="none">Notice that the </span><b><span data-contrast="none">Connect</span></b><span data-contrast="none"> button is disabled in the above screenshot. This is because the user must now complete all the required fields before they can click the Connect button. We hope to prevent common connection failures with this update. On top of completion, the </span><b><span data-contrast="none">Port</span></b><span data-contrast="none"> and</span><b><span data-contrast="none"> Proxy Port</span></b><span data-contrast="none"> fields must each contain an integer between 1 and 65535 to enable the </span><b><span data-contrast="none">Connect</span></b><span data-contrast="none"> button as shown below.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:279}"> </span></p>
<p><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335551550&quot;:2,&quot;335551620&quot;:2,&quot;335559739&quot;:160,&quot;335559740&quot;:279}"> <a href="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Screenshot-2024-04-16-124111.png"><img decoding="async" class="aligncenter wp-image-34041" src="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Screenshot-2024-04-16-124111.png" alt="Screenshot of the updated Connect to Remote System dialog where the Port entry is invalid and there is an error message above the field saying &quot;Port must be an integer between 1 and 65535.&quot; and the Connect button is disabled." width="429" height="425" srcset="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Screenshot-2024-04-16-124111.png 443w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Screenshot-2024-04-16-124111-300x297.png 300w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Screenshot-2024-04-16-124111-150x150.png 150w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Screenshot-2024-04-16-124111-24x24.png 24w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Screenshot-2024-04-16-124111-48x48.png 48w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Screenshot-2024-04-16-124111-96x96.png 96w" sizes="(max-width: 429px) 100vw, 429px" /></a></span></p>
<p><span data-contrast="none">We also updated how we display errors from failed connection attempts to users as seen in the screenshot below.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:279}"> </span></p>
<p><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335551550&quot;:2,&quot;335551620&quot;:2,&quot;335559739&quot;:160,&quot;335559740&quot;:279}"> <a href="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Screenshot-2024-04-16-124151.png"><img decoding="async" class="aligncenter wp-image-34042" src="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Screenshot-2024-04-16-124151.png" alt="Screenshot of the updated Connect to Remote System dialog with a failed connection error. The error is displayed above the fields in an info bar and the Host Name and Port field are highlighted and labelled as &quot;may be incorrect&quot;. The Connect button is enabled." width="384" height="425" srcset="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Screenshot-2024-04-16-124151.png 443w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Screenshot-2024-04-16-124151-271x300.png 271w" sizes="(max-width: 384px) 100vw, 384px" /></a></span></p>
<p><span data-contrast="none">Now we present the connection attempt failure reason in an error bar above the fields. We highlight the fields that </span><i><span data-contrast="none">may</span></i><span data-contrast="none"> be related to the failure reason and convey that the field may be incorrect in the highlighted fields’ tooltips and now additionally above each highlighted field too. We also eliminated the frustration of needing to modify the highlighted fields to be able to hit the </span><b><span data-contrast="none">Connect</span></b><span data-contrast="none"> button again, so that the user can decide what fields they need to fix. </span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:279}"> </span></p>
<p><span data-contrast="none">Finally, as a finishing touch we updated all the fields to visually behave similarly on hover, focus, etc.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:279}"> </span></p>
<h2 aria-level="1" aria-level="1" id="let-us-know-how-we-did"><span data-contrast="none">Let Us Know How We Did</span><span data-ccp-props="{&quot;134245418&quot;:true,&quot;134245529&quot;:true,&quot;201341983&quot;:0,&quot;335559738&quot;:360,&quot;335559739&quot;:80,&quot;335559740&quot;:278}"> </span></h2>
<p><span data-contrast="none">We appreciate all feedback! These usability improvements came about from reported issues and suggestions from users like you. You can share your feedback via the </span><a href="https://developercommunity.visualstudio.com/cpp"><span data-contrast="none">Visual Studio Developer Community</span></a><span data-contrast="auto">, find us on X (</span><a href="https://twitter.com/visualc"><span data-contrast="none">@VisualC</span></a><span data-contrast="auto">), email us at </span><a href="mailto:visualcpp@microsoft.com"><span data-contrast="none">visualcpp@microsoft.com</span></a><span data-contrast="auto">, or comment below. You can also open bugs by following the instructions </span><a href="https://developercommunity.visualstudio.com/report?space=8&amp;entry=problem"><span data-contrast="none">here</span></a><span data-contrast="auto">.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:279}"> </span></p>
<p>The post <a href="https://devblogs.microsoft.com/cppblog/usability-improvements-in-the-visual-studio-connection-manager/">Usability Improvements in the Visual Studio Connection Manager</a> appeared first on <a href="https://devblogs.microsoft.com/cppblog">C++ Team Blog</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://devblogs.microsoft.com/cppblog/usability-improvements-in-the-visual-studio-connection-manager/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>Visual Studio features for C++ Header Files and Modules</title>
		<link>https://devblogs.microsoft.com/cppblog/visual-studio-features-for-c-header-files-and-modules/</link>
					<comments>https://devblogs.microsoft.com/cppblog/visual-studio-features-for-c-header-files-and-modules/#respond</comments>
		
		<dc:creator><![CDATA[Mryam Girmay]]></dc:creator>
		<pubDate>Thu, 25 Apr 2024 19:25:27 +0000</pubDate>
				<category><![CDATA[C++]]></category>
		<guid isPermaLink="false">https://devblogs.microsoft.com/cppblog/?p=34065</guid>

					<description><![CDATA[<p>In the field of C++ programming, the management of header files and modules can often seem challenging. However, there are numerous tools and features available that can simplify this process, enhancing efficiency and reducing the likelihood of errors. Here’s a walkthrough for several tools that we provide for C++ headers and modules.</p>
<p>The post <a href="https://devblogs.microsoft.com/cppblog/visual-studio-features-for-c-header-files-and-modules/">Visual Studio features for C++ Header Files and Modules</a> appeared first on <a href="https://devblogs.microsoft.com/cppblog">C++ Team Blog</a>.</p>
]]></description>
										<content:encoded><![CDATA[<p>In the field of C++ programming, the management of header files and modules can often seem challenging. However, there are numerous tools and features available that can simplify this process, enhancing efficiency and reducing the likelihood of errors. Here’s a walkthrough for several tools that we provide for C++ headers and modules.</p>
<h3 id="run-build-insights">Run Build Insights</h3>
<p>Start by running <a href="https://devblogs.microsoft.com/cppblog/build-insights-now-available-in-visual-studio-2022/">Build Insights,</a> through navigating to <strong>Build </strong>&gt;<strong> Run Build Insights</strong>.</p>
<p><a href="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Build-Insights-Image-1.png"><img decoding="async" class="aligncenter size-full wp-image-34071" src="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Build-Insights-Image-1.png" alt="Image Build Insights Image" width="2581" height="737" srcset="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Build-Insights-Image-1.png 2581w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Build-Insights-Image-1-300x86.png 300w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Build-Insights-Image-1-1024x292.png 1024w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Build-Insights-Image-1-768x219.png 768w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Build-Insights-Image-1-1536x439.png 1536w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Build-Insights-Image-1-2048x585.png 2048w" sizes="(max-width: 2581px) 100vw, 2581px" /></a></p>
<p>This tool provides insights into the Include File and Include Tree views to analyze and optimize your #include usage. For instance, in the <a href="https://github.com/bulletphysics/bullet3">bullet3</a> sample repository, running Build Insights reveals that the overall build time of our current project is 202.812 seconds.</p>
<p><a href="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Build-Insights-Initial-Result.png"><img decoding="async" class="aligncenter size-full wp-image-34073" src="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Build-Insights-Initial-Result.png" alt="Image Build Insights Result" width="1086" height="483" srcset="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Build-Insights-Initial-Result.png 1086w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Build-Insights-Initial-Result-300x133.png 300w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Build-Insights-Initial-Result-1024x455.png 1024w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Build-Insights-Initial-Result-768x342.png 768w" sizes="(max-width: 1086px) 100vw, 1086px" /></a></p>
<h3 id=""></h3>
<h3 id="enable-include-cleanup">Enable #include Cleanup</h3>
<p>Next, enable the <a href="https://learn.microsoft.com/en-us/cpp/ide/include-cleanup-overview?view=msvc-170">#include cleanup</a> feature (<strong>Tools </strong>&gt; <strong>Options </strong>&gt; <strong>Text Editor</strong> &gt; <strong>C/C++ </strong>&gt; <strong>Code Cleanup </strong>&gt; <strong>Enable #include cleanup</strong>). This feature helps remove unused #include directives and add transitively used headers. You can also adjust the severity of the suggestion levels to suit your coding style and requirements.</p>
<p><a href="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Include-cleanup-setting.png"><img decoding="async" class="aligncenter size-full wp-image-34074" src="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Include-cleanup-setting.png" alt="Image Include cleanup setting" width="1872" height="1212" srcset="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Include-cleanup-setting.png 1872w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Include-cleanup-setting-300x194.png 300w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Include-cleanup-setting-1024x663.png 1024w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Include-cleanup-setting-768x497.png 768w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Include-cleanup-setting-1536x994.png 1536w" sizes="(max-width: 1872px) 100vw, 1872px" /></a></p>
<h3 id=""></h3>
<h3 id="configure-include-cleanup">Configure #include Cleanup</h3>
<p>You can also customize how #include cleanup generates suggestions using <a href="https://learn.microsoft.com/en-us/visualstudio/ide/create-portable-custom-editor-options?view=vs-2022">EditorConfig</a>. You can exclude specific includes, specify dependencies, remap headers, and specify alternatives using the setting in <a href="https://learn.microsoft.com/en-us/cpp/ide/include-cleanup-config?view=msvc-170#configure-include-cleanup-with-editorconfig">Configure Include Cleanup with .editorconfig.</a></p>
<h3 id="use-include-cleanup">Use #include Cleanup</h3>
<p>Utilize the lightbulb in the editor for the following tasks:</p>
<p><strong>Adding Transitively Used Headers</strong>: Add indirectly used includes individually or all at once.</p>
<p><strong>Removing Unused Headers</strong>: Remove unused includes individually or all at once.</p>
<p><strong>Optimizing Include Graph for this file</strong>: Add all transitively used includes and remove unused ones for an optimized include structure.</p>
<p>Let’s apply this to the ‘test_invdyn_jacobian.cpp’ file in our sample repo. Choose “Optimize include graph for test_invdyn_jacobian.cpp”</p>
<p><a href="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/include_cleanup_gif.gif"><img decoding="async" class="aligncenter size-full wp-image-34077" src="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/include_cleanup_gif.gif" alt="GIF #include cleanup" width="938" height="616" /></a></p>
<h3 id=""></h3>
<h3 id="check-build-time-improvement">Check Build Time Improvement</h3>
<p>After cleaning your ‘test_invdyn_jacobian.cpp’ file, run Build Insights again to quantify the benefits of your cleanup efforts. In our sample repo, the overall build time improved to 197.76 seconds.</p>
<p>The #include cleanup feature doesn’t clean your entire project all at once. But you can use it to gradually improve your project. Focus on the parts that take the longest to build. You can find these parts using Build Insights. The more files you clean, the faster your project will build.</p>
<p><a href="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Build-Insights-Improved-Result.png"><img decoding="async" class="aligncenter size-full wp-image-34075" src="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Build-Insights-Improved-Result.png" alt="Image Build Insights Improved Result" width="1071" height="503" srcset="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Build-Insights-Improved-Result.png 1071w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Build-Insights-Improved-Result-300x141.png 300w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Build-Insights-Improved-Result-1024x481.png 1024w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Build-Insights-Improved-Result-768x361.png 768w" sizes="(max-width: 1071px) 100vw, 1071px" /></a></p>
<h3 id=""></h3>
<h3 id="enable-include-diagnostics">Enable #include Diagnostics</h3>
<p>The <a href="https://learn.microsoft.com/en-us/cpp/ide/include-diagnostics?view=msvc-170">#include Diagnostics</a> feature allows you to view the usage and build time of your header files directly in your editor.</p>
<h3 id="turn-on-include-diagnostics">Turn On #include Diagnostics</h3>
<p>Turn on #include diagnostics by right-clicking on the editor to open the context menu, navigating to the ‘#include Directives’ option, and choosing “Turn #include Diagnostics On”. This will display CodeLens above each of your header files, providing information about their usage and build time.</p>
<p>Upon evaluating the build time and usage of each header file, you can employ the #include cleanup feature to refine your headers. This action can markedly improve the overall build time of your project. The reason behind this is that any unused include directive within these headers can cause an unnecessary expansion of the graph wherever the header is utilized. By removing these, you are effectively making the build process more efficient.</p>
<p><a href="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/include_diagnostics_gif.gif"><img decoding="async" class="aligncenter size-full wp-image-34076" src="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/include_diagnostics_gif.gif" alt="GIF #include diagnostics " width="1215" height="660" /></a></p>
<h3 id=""></h3>
<h3 id="use-modules-in-c20">Use Modules in C++20</h3>
<p>In addition to the features mentioned above, C++20 introduces Header Units and Named Modules.</p>
<p><strong>Header Units</strong> serve as a bridge between traditional header inclusion and named modules. They allow you to import header files as modules, providing a faster and more robust alternative to the traditional #include. Importantly, they don’t require any changes to your header files but do need significant modifications to your build system.</p>
<p><strong>Named Modules</strong> offer superior performance and control over what they export. They require the creation of .ixx files and the addition of export keywords. The order of imports doesn’t matter due to their order-independence and macro-independence.</p>
<p>To dive deeper into these features, check out the <a href="https://learn.microsoft.com/en-us/cpp/cpp/modules-cpp?view=msvc-170">Overview of modules in C++</a> and <a href="https://learn.microsoft.com/en-us/cpp/build/walkthrough-header-units?view=msvc-170">Walkthrough: Build and import header units in Visual C++ projects</a> on Microsoft Learn.</p>
<p>&nbsp;</p>
<h3 id="send-us-your-feedback">Send us your feedback</h3>
<p>We value your input! If you have any insights, suggestions, or requests, please let us know in the comments section below <span data-contrast="auto">or </span><span data-contrast="none">in the </span><a href="https://developercommunity.visualstudio.com/search?space=62" target="_blank" rel="noopener"><span data-contrast="none">Developer Community</span></a>. You can also reach out to us on Twitter (<a href="https://twitter.com/visualc">@VisualC</a>) or via email at <a href="mailto:visualcpp@microsoft.com">visualcpp@microsoft.com</a>.</p>
<p>The post <a href="https://devblogs.microsoft.com/cppblog/visual-studio-features-for-c-header-files-and-modules/">Visual Studio features for C++ Header Files and Modules</a> appeared first on <a href="https://devblogs.microsoft.com/cppblog">C++ Team Blog</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://devblogs.microsoft.com/cppblog/visual-studio-features-for-c-header-files-and-modules/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>Pure Virtual C++ Pre-Conference Videos &#8211; Linux Development, Modules, Containers and more!</title>
		<link>https://devblogs.microsoft.com/cppblog/pure-virtual-cpp-pre-conference-videos/</link>
					<comments>https://devblogs.microsoft.com/cppblog/pure-virtual-cpp-pre-conference-videos/#respond</comments>
		
		<dc:creator><![CDATA[Sy Brand]]></dc:creator>
		<pubDate>Mon, 22 Apr 2024 19:28:22 +0000</pubDate>
				<category><![CDATA[Announcement]]></category>
		<category><![CDATA[Pure Virtual C++]]></category>
		<guid isPermaLink="false">https://devblogs.microsoft.com/cppblog/?p=34056</guid>

					<description><![CDATA[<p>&#160;<br />
Pure Virtual C++ is our free one-day virtual conference for the whole C++ community. This year it will run on April 30th 15:00 UTC. Sign-up for free to get access to our five sessions on the day.<br />
Half of the pre-conference content for the conference is now available.</p>
<p>The post <a href="https://devblogs.microsoft.com/cppblog/pure-virtual-cpp-pre-conference-videos/">Pure Virtual C++ Pre-Conference Videos &#8211; Linux Development, Modules, Containers and more!</a> appeared first on <a href="https://devblogs.microsoft.com/cppblog">C++ Team Blog</a>.</p>
]]></description>
										<content:encoded><![CDATA[<p><a href="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/03/pvclogo.png"><img decoding="async" class="aligncenter size-full wp-image-33787" src="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/03/pvclogo.png" alt="Image pvclogo" width="680" height="181" srcset="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/03/pvclogo.png 680w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/03/pvclogo-300x80.png 300w" sizes="(max-width: 680px) 100vw, 680px" /></a></p>
<p>&nbsp;</p>
<p>Pure Virtual C++ is our free one-day virtual conference for the whole C++ community. This year it will run on April 30th 15:00 UTC. <a href="https://developer.microsoft.com/en-us/reactor/events/22077/" target="_blank" rel="noopener">Sign-up for free</a> to get access to our five sessions on the day.</p>
<p>Half of the pre-conference content for the conference is now available. We have videos on a host of topics:</p>
<ul>
<li><a href="https://www.youtube.com/watch?v=AQrNonAUuOU">Visualizing Macro Expansion in Visual Studio &#8211; Mryam Girmay</a></li>
<li><a href="https://www.youtube.com/watch?v=acJMpInHAHk">Remote Unit Testing in Visual Studio &#8211; Jonathan Phippen</a></li>
<li><a href="https://www.youtube.com/watch?v=jZTMRvm8AwY">New Linux Development Features in Visual Studio &#8211; Paul Maybee</a></li>
<li><a href="https://www.youtube.com/watch?v=UJnjCEVlDfM">Dev Containers in Visual Studio &#8211; Oleg Kharitonov</a></li>
<li><a href="https://www.youtube.com/watch?v=TFDtgey3iRU">New Features for CMake Targets View in Visual Studio &#8211; Garrett Campbell</a></li>
<li><a href="https://www.youtube.com/watch?v=ulftqyA3A8o">An Overview of vcpkg in 10 Minutes &#8211; Augustin Popa</a></li>
<li><a href="https://www.youtube.com/watch?v=t6QCzVXrwIw">A Tour of the IFC SDK: Tools for a C++ Module Format &#8211; Cameron DaCamara</a></li>
</ul>
<p>Keep your eye out for more in the run up to the conference!</p>
<p>The post <a href="https://devblogs.microsoft.com/cppblog/pure-virtual-cpp-pre-conference-videos/">Pure Virtual C++ Pre-Conference Videos &#8211; Linux Development, Modules, Containers and more!</a> appeared first on <a href="https://devblogs.microsoft.com/cppblog">C++ Team Blog</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://devblogs.microsoft.com/cppblog/pure-virtual-cpp-pre-conference-videos/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>VS Code C++ Extension 1.19 Release: 3.6x faster Go To Symbol &#038; 1.5x faster colorization</title>
		<link>https://devblogs.microsoft.com/cppblog/vs-code-c-extension-1-19-release-faster-go-to-symbol-and-colorization/</link>
					<comments>https://devblogs.microsoft.com/cppblog/vs-code-c-extension-1-19-release-faster-go-to-symbol-and-colorization/#respond</comments>
		
		<dc:creator><![CDATA[Alexandra Kemper]]></dc:creator>
		<pubDate>Thu, 18 Apr 2024 20:05:26 +0000</pubDate>
				<category><![CDATA[C++]]></category>
		<category><![CDATA[performance]]></category>
		<category><![CDATA[Visual Studio Code]]></category>
		<category><![CDATA[C++ extension]]></category>
		<category><![CDATA[VSCode]]></category>
		<guid isPermaLink="false">https://devblogs.microsoft.com/cppblog/?p=34009</guid>

					<description><![CDATA[<p>With our recent 1.19 release, performance was our biggest focus for the C++ Extension in Visual Studio Code. This included features like progressive population of IntelliSense results and faster symbol searching. With these enhancements, you can begin writing C++ code when opening a file quicker than ever before.</p>
<p>The post <a href="https://devblogs.microsoft.com/cppblog/vs-code-c-extension-1-19-release-faster-go-to-symbol-and-colorization/">VS Code C++ Extension 1.19 Release: 3.6x faster Go To Symbol &#038; 1.5x faster colorization</a> appeared first on <a href="https://devblogs.microsoft.com/cppblog">C++ Team Blog</a>.</p>
]]></description>
										<content:encoded><![CDATA[<p><span data-contrast="auto">With our recent <a href="https://github.com/microsoft/vscode-cpptools/releases/tag/v1.19.9">1.19 release</a>, performance was our biggest focus for the C++ Extension in Visual Studio Code. This included features like progressive population of IntelliSense results and faster symbol searching. </span><span data-contrast="none">With these enhancements, you can begin writing C++ code when opening a file quicker than ever before. Additionally, we also added support for fuzzy results when searching for symbols.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:279}"> </span></p>
<h3 aria-level="2" aria-level="2" id="faster-go-to-symbol-search"><span data-contrast="none">Faster Go To Symbol Search</span><span data-ccp-props="{&quot;134245418&quot;:true,&quot;134245529&quot;:true,&quot;201341983&quot;:0,&quot;335559738&quot;:160,&quot;335559739&quot;:80,&quot;335559740&quot;:279}"> </span></h3>
<p><span data-contrast="auto">Searching for symbols using the “Go to Symbol in Workspace” command now uses a new algorithm which returns relevant results in a fraction of the time it took previously. </span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335557856&quot;:16777215,&quot;335559737&quot;:-20,&quot;335559739&quot;:240,&quot;335559740&quot;:279}"> </span></p>
<p><span data-contrast="auto">This new algorithm uses a full-text-search index of symbols that is maintained on the fly, supporting a variety of search methods to find symbols depending on which will be the fastest way to provide results. The search is handled through several different queries, starting with literal matches and progressively moving towards fuzzy matches. This has also added support for fuzzy search results when searching for symbols.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335557856&quot;:16777215,&quot;335559737&quot;:-20,&quot;335559739&quot;:240,&quot;335559740&quot;:279}"> </span></p>
<p><span data-contrast="auto">Through our testing, we found an average 5.8x speedup on MacOS, 2.1x on Linux, and 3.1x on Windows. Testing was done using VS Code 1.86.2 on a low-tier machine and searching for a symbol in the </span><a href="https://pytorch.org/"><span data-contrast="none">PyTorch source code</span></a><span data-contrast="auto">.</span></p>
<p><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335551550&quot;:2,&quot;335551620&quot;:2,&quot;335557856&quot;:16777215,&quot;335559737&quot;:-20,&quot;335559739&quot;:240,&quot;335559740&quot;:279}"> <a href="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Screenshot-2024-04-16-161327.png"><img decoding="async" class="aligncenter wp-image-34011" src="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Screenshot-2024-04-16-161327-1024x618.png" alt="Graph that shows a bar graph split by operating system. For all three operating systems, the 1.19 version is faster by a few seconds compared to the 1.18 version." width="613" height="370" srcset="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Screenshot-2024-04-16-161327-1024x618.png 1024w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Screenshot-2024-04-16-161327-300x181.png 300w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Screenshot-2024-04-16-161327-768x464.png 768w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Screenshot-2024-04-16-161327.png 1212w" sizes="(max-width: 613px) 100vw, 613px" /></a></span></p>
<p><span class="TextRun SCXW264022781 BCX8" lang="EN-US" xml:lang="EN-US" data-contrast="none"><span class="NormalTextRun SCXW264022781 BCX8">Experience this for yourself by upgrading to the </span><span class="NormalTextRun SCXW264022781 BCX8">new version</span><span class="NormalTextRun SCXW264022781 BCX8"> and using the “</span><span class="NormalTextRun CommentStart SCXW264022781 BCX8">Go </span><span class="NormalTextRun SCXW264022781 BCX8">t</span><span class="NormalTextRun SCXW264022781 BCX8">o</span><span class="NormalTextRun SCXW264022781 BCX8"> Symbol</span><span class="NormalTextRun SCXW264022781 BCX8"> in Workspace</span><span class="NormalTextRun SCXW264022781 BCX8">” command in the command palette</span><span class="NormalTextRun SCXW264022781 BCX8">:</span></span><span class="EOP SCXW264022781 BCX8" data-ccp-props="{&quot;201341983&quot;:0,&quot;335557856&quot;:16777215,&quot;335559737&quot;:-20,&quot;335559739&quot;:240,&quot;335559740&quot;:279}"> </span></p>
<p><a href="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/GoToSymbolExample.gif"><img decoding="async" class="aligncenter wp-image-34012" src="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/GoToSymbolExample.gif" alt="A gif that shows a user calling on the command pallete and typing in the go to symbol in workspace command. they tend search for a function name by typing the function name" width="701" height="362" /></a></p>
<h3 aria-level="2" aria-level="2" id="faster-time-to-colorization"><span data-contrast="none">Faster Time to Colorization</span><span data-ccp-props="{&quot;134245418&quot;:true,&quot;134245529&quot;:true,&quot;201341983&quot;:0,&quot;335559738&quot;:160,&quot;335559739&quot;:80,&quot;335559740&quot;:279}"> </span></h3>
<p><span data-contrast="none">When opening a source file with the 1.19 version of the C++ Extension installed, </span><a href="https://code.visualstudio.com/api/language-extensions/semantic-highlight-guide"><span data-contrast="none">semantic highlighting</span></a><span data-contrast="none"> is now much faster. This change is due to the C++ Extension now providing colorization in increments, starting with the visible area, rather than waiting for an entire file to be analyzed before colorization can begin.  </span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335557856&quot;:16777215,&quot;335559737&quot;:-20,&quot;335559739&quot;:240,&quot;335559740&quot;:279}"> </span></p>
<p><span data-contrast="auto">Based on our testing, we found an average 1.5x speedup for time to colorization for Windows, 1.8x for Linux, and 1.2x for MacOS. This testing was done using VS Code 1.86.2/1.85.2 on a low-tier machine and colorizing a file in the </span><a href="https://pytorch.org/"><span data-contrast="none">PyTorch source code</span></a><span data-contrast="auto">.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335557856&quot;:16777215,&quot;335559737&quot;:-20,&quot;335559739&quot;:240,&quot;335559740&quot;:279}"> </span></p>
<p><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335551550&quot;:2,&quot;335551620&quot;:2,&quot;335557856&quot;:16777215,&quot;335559737&quot;:-20,&quot;335559739&quot;:240,&quot;335559740&quot;:279}"><a href="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Average_time_to_colorization.png"><img decoding="async" class="aligncenter wp-image-34017" src="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Average_time_to_colorization.png" alt="Image that shows a bar graph with the Average time to colorization per operating system. the times for version 1.19 are all faster than 1.18 across the operating system." width="625" height="378" srcset="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Average_time_to_colorization.png 1174w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Average_time_to_colorization-300x181.png 300w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Average_time_to_colorization-1024x619.png 1024w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Average_time_to_colorization-768x464.png 768w" sizes="(max-width: 625px) 100vw, 625px" /></a></span></p>
<p><span class="TextRun SCXW234687376 BCX8" lang="EN-US" xml:lang="EN-US" data-contrast="none"><span class="NormalTextRun SCXW234687376 BCX8">But what does this difference feel like? Especially when opening large, complex files </span><span class="NormalTextRun SCXW234687376 BCX8">you can see the change – for example,</span><span class="NormalTextRun SCXW234687376 BCX8"> the </span></span><a class="Hyperlink SCXW234687376 BCX8" href="https://www.sqlite.org/index.html" target="_blank" rel="noreferrer noopener"><span class="TextRun Underlined SCXW234687376 BCX8" lang="EN-US" xml:lang="EN-US" data-contrast="none"><span class="NormalTextRun SCXW234687376 BCX8" data-ccp-charstyle="Hyperlink">amalgamation source file for SQLite</span></span></a><span class="TextRun SCXW234687376 BCX8" lang="EN-US" xml:lang="EN-US" data-contrast="none"><span class="NormalTextRun SCXW234687376 BCX8"> which is </span><span class="NormalTextRun CommentStart SCXW234687376 BCX8">8.8MB</span><span class="NormalTextRun SCXW234687376 BCX8">. F</span><span class="NormalTextRun SCXW234687376 BCX8">ull colorization</span><span class="NormalTextRun CommentStart SCXW234687376 BCX8"> in this windows based example used to </span><span class="NormalTextRun CommentStart SCXW234687376 BCX8">take 11 seconds,</span><span class="NormalTextRun CommentStart SCXW234687376 BCX8"> now</span><span class="NormalTextRun SCXW234687376 BCX8"> it only takes 3 seconds (</span><span class="NormalTextRun CommentStart SCXW234687376 BCX8">3.7</span><span class="NormalTextRun SCXW234687376 BCX8">x</span> <span class="NormalTextRun SCXW234687376 BCX8">faster than</span><span class="NormalTextRun SCXW234687376 BCX8"> before!</span><span class="NormalTextRun SCXW234687376 BCX8">)</span><span class="NormalTextRun CommentStart SCXW234687376 BCX8">:</span> </span><span class="EOP SCXW234687376 BCX8" data-ccp-props="{&quot;201341983&quot;:0,&quot;335557856&quot;:16777215,&quot;335559737&quot;:-20,&quot;335559739&quot;:240,&quot;335559740&quot;:279}"> </span></p>
<p><div style="width: 640px;" class="wp-video"><!--[if lt IE 9]><script>document.createElement('video');</script><![endif]-->
<video class="wp-video-shortcode" id="video-34009-1" width="640" height="360" preload="metadata" controls="controls"><source type="video/mp4" src="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/ProgressiveIntelliSenseAndColorization.mp4?_=1" /><a href="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/ProgressiveIntelliSenseAndColorization.mp4">https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/ProgressiveIntelliSenseAndColorization.mp4</a></video></div></p>
<p><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335557856&quot;:16777215,&quot;335559737&quot;:-20,&quot;335559739&quot;:240,&quot;335559740&quot;:279}"> Note that the colorization speedup might vary based various factors such as the machine used, workspace size, and file size. </span></p>
<h3 aria-level="2" aria-level="2" id="other-enhancements"><span data-contrast="none">Other Enhancements </span><span data-ccp-props="{&quot;134245418&quot;:true,&quot;134245529&quot;:true,&quot;201341983&quot;:0,&quot;335559738&quot;:160,&quot;335559739&quot;:80,&quot;335559740&quot;:279}"> </span></h3>
<p><span data-contrast="none">There have been many other enhancements, performance improvements, and bug fixes included in version 1.19. For example, we added several enhancements when adding #includes to a file. To learn more about these changes, please reference the </span><a href="https://github.com/microsoft/vscode-cpptools/releases"><span data-contrast="none">1.19 changelog</span></a><span data-contrast="none">. </span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335557856&quot;:16777215,&quot;335559737&quot;:-20,&quot;335559739&quot;:0,&quot;335559740&quot;:279}"> </span></p>
<h3 aria-level="2" aria-level="2" id="what-do-you-think"><span data-contrast="none">What do you think? </span><span data-ccp-props="{&quot;134245418&quot;:true,&quot;134245529&quot;:true,&quot;201341983&quot;:0,&quot;335559738&quot;:160,&quot;335559739&quot;:80,&quot;335559740&quot;:279}"> </span></h3>
<p><a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode.cpptools"><span data-contrast="none">Download the C/C++ extension for Visual Studio Code </span></a><span data-contrast="none"> today, give it a try, and let us know what you think. </span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:240,&quot;335559740&quot;:279}"> </span></p>
<p><span data-contrast="none">If you have any questions around this release, feel free to start a discussion in </span><a href="https://github.com/microsoft/vscode-cpptools/discussions"><span data-contrast="none">our GitHub repository.</span></a><span data-contrast="none"> Otherwise, if you run into any issues, please report them in the </span><a href="https://github.com/Microsoft/vscode-cpptools/issues"><span data-contrast="none">issues section</span></a><span data-contrast="none">. We can be reached via the comments below, per email at  </span><a href="mailto:visualcpp@microsoft.com"><span data-contrast="none">visualcpp@microsoft.com,</span></a><span data-contrast="none"> or through our team on X/Twitter at  </span><a href="https://twitter.com/visualc"><span data-contrast="none">@</span></a><a href="https://twitter.com/visualc"><span data-contrast="none">VisualC.</span></a><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:240,&quot;335559740&quot;:279}"> </span></p>
<p>The post <a href="https://devblogs.microsoft.com/cppblog/vs-code-c-extension-1-19-release-faster-go-to-symbol-and-colorization/">VS Code C++ Extension 1.19 Release: 3.6x faster Go To Symbol &#038; 1.5x faster colorization</a> appeared first on <a href="https://devblogs.microsoft.com/cppblog">C++ Team Blog</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://devblogs.microsoft.com/cppblog/vs-code-c-extension-1-19-release-faster-go-to-symbol-and-colorization/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		<enclosure url="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/ProgressiveIntelliSenseAndColorization.mp4" length="4490855" type="video/mp4" />

			</item>
		<item>
		<title>Templates View for Build Insights in Visual Studio </title>
		<link>https://devblogs.microsoft.com/cppblog/templates-view-for-build-insights-in-visual-studio-2/</link>
					<comments>https://devblogs.microsoft.com/cppblog/templates-view-for-build-insights-in-visual-studio-2/#comments</comments>
		
		<dc:creator><![CDATA[Lauren Prinn]]></dc:creator>
		<pubDate>Mon, 15 Apr 2024 16:36:16 +0000</pubDate>
				<category><![CDATA[Announcement]]></category>
		<category><![CDATA[C++]]></category>
		<guid isPermaLink="false">https://devblogs.microsoft.com/cppblog/?p=33970</guid>

					<description><![CDATA[<p>Introduction<br />
Introducing the new Templates View feature of Build Insights! Templates View now allows you to capture data about how templates in your codebase are contributing to your build time. This feature is available in Visual Studio 2022 17.10 and later.  </p>
<p>The post <a href="https://devblogs.microsoft.com/cppblog/templates-view-for-build-insights-in-visual-studio-2/">Templates View for Build Insights in Visual Studio </a> appeared first on <a href="https://devblogs.microsoft.com/cppblog">C++ Team Blog</a>.</p>
]]></description>
										<content:encoded><![CDATA[<h3 style="text-align: left;" aria-level="1" style="text-align: left;" aria-level="1" id="introduction"><span style="color: #800080;" data-contrast="none">Introduction</span></h3>
<p><span data-contrast="auto">Introducing the new Templates View feature of Build Insights! Templates View now allows you to capture data about how templates in your codebase are contributing to your build time. This feature is available in Visual Studio 2022 17.10 and later. </span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:278}"> </span></p>
<p><a href="https://visualstudio.microsoft.com/downloads/"><span data-contrast="none">Download Visual Studio 2022</span></a><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:278}"> </span></p>
<h3 style="text-align: left;" aria-level="2" style="text-align: left;" aria-level="2" id="getting-started-with-templates-view"><span style="color: #800080;" data-contrast="none">Getting Started with Templates View</span><span data-ccp-props="{&quot;134245418&quot;:true,&quot;134245529&quot;:true,&quot;201341983&quot;:0,&quot;335559738&quot;:160,&quot;335559739&quot;:80,&quot;335559740&quot;:278}"> </span></h3>
<p><span data-contrast="auto">To use Build Insights in Visual Studio you will need to ensure you’ve installed the “C++ Build Insights” component. This is installed by default if you’ve installed either the “Desktop development with C++” or “Game development with C++” workloads.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:278}"> </span></p>
<p><span data-contrast="auto">By default, Templates View is turned off; To turn on Templates View navigate to the </span><b><span data-contrast="auto">Tools </span></b><span data-contrast="auto">menu and select </span><b><span data-contrast="auto">Options&#8230; </span></b><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:278}"> </span></p>
<p><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335551550&quot;:2,&quot;335551620&quot;:2,&quot;335559739&quot;:160,&quot;335559740&quot;:278}"> <a href="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/options-1.png"><img decoding="async" class="aligncenter wp-image-33969 " src="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/options-1.png" alt="Image options" width="285" height="306" srcset="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/options-1.png 880w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/options-1-279x300.png 279w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/options-1-768x825.png 768w" sizes="(max-width: 285px) 100vw, 285px" /></a></span></p>
<p><span data-contrast="auto">Select </span><b><span data-contrast="auto">Build Insights</span></b><span data-contrast="auto"> in the list of options and click </span><b><span data-contrast="auto">Trace Collection</span></b><span data-contrast="auto">. This will show the available settings for Build Insights.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:278}"> </span></p>
<p><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335551550&quot;:2,&quot;335551620&quot;:2,&quot;335559739&quot;:160,&quot;335559740&quot;:278}"> <a href="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/settings.png"><img decoding="async" class="aligncenter wp-image-33965 " src="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/settings.png" alt="Image settings" width="474" height="273" srcset="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/settings.png 516w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/settings-300x173.png 300w" sizes="(max-width: 474px) 100vw, 474px" /></a></span></p>
<p><span data-contrast="auto">In the popup options menu, select the checkbox for </span><b><span data-contrast="auto">Template Instantiation Collection</span></b><span data-contrast="auto">; this will turn on Templates View.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:278}"> </span></p>
<p><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335551550&quot;:2,&quot;335551620&quot;:2,&quot;335559739&quot;:160,&quot;335559740&quot;:278}"> <a href="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/checkbox.png"><img decoding="async" class="aligncenter wp-image-33966 " src="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/checkbox.png" alt="Image checkbox" width="502" height="315" srcset="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/checkbox.png 676w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/checkbox-300x188.png 300w" sizes="(max-width: 502px) 100vw, 502px" /></a></span></p>
<p><span data-contrast="auto">With the checkbox selected, you can run Build Insights on your project. This action will collect the template data and display it. If you have a trace file from a previous run where the template data was collected, you can open this trace file to view the &#8220;Templates View&#8221; in the report.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:278}"> </span></p>
<p><span data-contrast="auto">Please note that if you have a trace file that was run without this checkbox turned on, the template data was not collected in that trace file and thus no data will appear in the Templates View. You will need to rerun Build Insights with Templates View turned on if you’d like to see the template data for that project. </span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:278}"> </span></p>
<h3 style="text-align: left;" aria-level="2" style="text-align: left;" aria-level="2" id="using-templates-view"><span style="color: #800080;">Using Templates View </span></h3>
<p><span data-contrast="auto">Templates View highlights the impact of the template instantiations that take the most time in your build. The view only shows instantiations whose contribution exceeds a certain threshold. If you see nothing in the Templates View, it means your build time is not dominated by template instantiations.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:278}"> </span></p>
<p><span data-contrast="auto">Let’s walk through an example together of how to use Templates View. In a new C++ Console Application project, add a header file called <code>Templates.h</code> with the following code snippet:</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:278}"> </span></p>
<pre class="prettyprint language-cpp"><code class="language-cpp">#pragma once 
#include &lt;utility&gt;  
#include &lt;vector&gt;  

template&lt;size_t&gt; struct S1 {}; 
template&lt;int n&gt; using type = std::vector&lt;S1&lt;n&gt;&gt;; 

template&lt;size_t...&gt; struct S2 {}; 

template&lt;typename&gt; struct S3 {}; 
template&lt;size_t... n&gt; 
struct S3&lt;std::index_sequence&lt;n...&gt;&gt; { 
    using type = S2&lt;sizeof(type&lt;n&gt;)...&gt;; 
}; 

inline size_t LargeValue() { 
    return sizeof(S3&lt;std::make_index_sequence&lt;1000&gt;&gt;); 
}; 

inline size_t SmallValue() { 
    return sizeof(S1&lt;5&gt;); 
} </code></pre>
<p><span data-contrast="auto">Then create a source file called <code>LargeValue.cpp</code> with the following code:</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:278}"> </span></p>
<pre class="prettyprint language-cpp"><code class="language-cpp">#include "Templates.h" 
size_t GetLargeValue() { 
    return LargeValue(); 
} </code></pre>
<p><span data-contrast="auto">Lastly, create a second source file called <code>SmallValue.cpp</code> with the below code:</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:278}"> </span></p>
<pre class="prettyprint language-cpp"><code class="language-cpp">#include "Templates.h" 
size_t GetSmallValue() { 
    return SmallValue(); 
}</code></pre>
<p><span data-contrast="auto">We’ll now run Build Insights on a rebuild of our project to get information about our build time.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:278}"> </span><a href="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Screenshot-5.png"><img decoding="async" class="aligncenter wp-image-33977 size-full" src="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Screenshot-5-e1712957868901.png" alt="Image Screenshot 5" width="2959" height="658" srcset="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Screenshot-5-e1712957868901.png 2959w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Screenshot-5-e1712957868901-300x67.png 300w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Screenshot-5-e1712957868901-1024x228.png 1024w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Screenshot-5-e1712957868901-768x171.png 768w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Screenshot-5-e1712957868901-1536x342.png 1536w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Screenshot-5-e1712957868901-2048x455.png 2048w" sizes="(max-width: 2959px) 100vw, 2959px" /></a></p>
<p><span data-contrast="auto">From the Templates View of Build Insights, we can see that two template instantiations of <code>S3</code> are taking 83% of the entire build time. The “Translation Unit” column shows that both <code>SmallValue.cpp</code> and <code>LargeValue.cpp</code> are causing this template instantiation to be included in the build. The “Instantiation File Path” shows us where the template instantiation happens. We can derive that there’s one expensive template instantiation affecting both of our source files, because the “Instantiation File Path” and the “Specialization Name” are the same. This also explains why the time of each of the two template instantiations are about equal. Essentially, by including <code>Templates.h</code> in both of our source files, we are causing one template instantiation to add almost 6 seconds to our build time.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:278}"> </span></p>
<p><span data-contrast="auto">Let’s investigate further to find where this template instantiation is located. We know that the instantiation is created in <code>Templates.h</code> and we can use the “Specialization Name” column to determine that the below code is the culprit:</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:278}"> </span></p>
<pre class="prettyprint language-cpp"><code class="language-cpp">inline size_t LargeValue() { 
    return sizeof(S3&lt;std::make_index_sequence&lt;1000&gt;&gt;); 
}; </code></pre>
<p><span data-contrast="auto">There are three main ways to decrease the cost of template instantiations. The first way is to review the template in question and determine if it’s being used or not. If it’s not being used, then the easiest solution is to remove the function. In our program,<code>LargeValue()</code>is being used by <code>LargeValue.cpp</code>, so we cannot remove it. We can also consider removing the include directive(s) that is bringing in this template instantiation. It’s easy to forget to remove header files when you’re no longer using them, and this is a great demonstration of how an include directive can cause a huge impact on build time. However, both of our source files are dependent on <code>Templates.h</code> so this will not help us.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:278}"> </span></p>
<p><span style="font-size: 10pt;"><a href="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/book.svg"><img decoding="async" class="wp-image-33978 alignleft" role="img" src="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/book.svg" alt="" width="50" height="50" /></a><strong>Read</strong> <a href="https://devblogs.microsoft.com/cppblog/include-cleanup-in-visual-studio/">#include cleanup in Visual Studio &#8211; C++ Team Blog (microsoft.com)</a> for more information on decreasing template instantiation cost by removing include directives. </span></p>
<p><span data-contrast="auto">The second way is to look at the template instantiation and determine if there is a way to optimize the code. The only optimization possible here is decreasing the size of the index sequence. As a fun exercise, try replacing 1000 with various numbers and see how that impacts the build time. </span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:278}"> </span></p>
<p><span style="font-size: 10pt;"><a href="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/book.svg"><img decoding="async" class="wp-image-33978 alignleft" role="img" src="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/book.svg" alt="" width="50" height="50" /></a><strong>Read</strong> <a href="https://devblogs.microsoft.com/cppblog/build-throughput-series-more-efficient-template-metaprogramming/">Build Throughput Series: More Efficient Template Metaprogramming &#8211; C++ Team Blog (microsoft.com)</a> for more practice reducing the cost of template metaprogramming. </span></p>
<p><span data-contrast="auto">For our purposes, let’s assume that we need an index sequence of 1000. We now need to rely on the third way to decrease template instantiation cost: moving the definition of <code>LargeValue()</code> to a source file. </span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:278}"> </span></p>
<p style="text-align: left;"><span style="font-size: 10pt;"><b><a href="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/lightbuld.svg"><img decoding="async" class="wp-image-33987 alignleft" role="img" src="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/lightbuld.svg" alt="" width="50" height="50" /></a>Tip: </b>If for some reason you need to keep the function in a header file, then you can move the definition to a .inl file. If you move the definition to a .inl file, then ensure the source files which use that function include both the header file and the .inl file. </span></p>
<p><span data-contrast="auto"><code>LargeValue.cpp</code> is the only source file that calls <code>LargeValue()</code>, so we can move the definition to <code>LargeValue.cpp</code>. To do this, remove the current definition of <code>LargeValue()</code> from <code>Templates.h</code> and replace it with the following declaration:</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:278}"> </span></p>
<pre class="prettyprint language-cpp"><code class="language-cpp">inline size_t LargeValue(); 

</code></pre>
<p><span data-contrast="auto">Then, inside LargeValue.cpp add the following code snippet: </span></p>
<pre class="prettyprint language-cpp"><code class="language-cpp">inline size_t LargeValue() { 
    return sizeof(S3&lt;std::make_index_sequence&lt;1000&gt;&gt;); 
} </code></pre>
<p><span data-contrast="auto">If we rerun Build Insights on a rebuild of the project we can now see the below Templates View:</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:278}"> </span><a href="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Screenshot-4.png"><img decoding="async" class="aligncenter wp-image-33976 size-full" src="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Screenshot-4-e1712957925348.png" alt="Image Screenshot 4" width="2964" height="491" srcset="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Screenshot-4-e1712957925348.png 2964w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Screenshot-4-e1712957925348-300x50.png 300w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Screenshot-4-e1712957925348-1024x170.png 1024w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Screenshot-4-e1712957925348-768x127.png 768w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Screenshot-4-e1712957925348-1536x254.png 1536w, https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/Screenshot-4-e1712957925348-2048x339.png 2048w" sizes="(max-width: 2964px) 100vw, 2964px" /></a></p>
<p><span data-contrast="auto">The build time has significantly decreased. While the template instantiation of <code>S3</code> is still contributing 76% of the build time, we’ve been able to about half the total time, by only including necessary template instantiations (you can see the count of <code>S3</code> is now 1).</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:278}"> </span></p>
<p style="text-align: left;"><span data-contrast="auto">The techniques used in this example can be applied to larger projects. If multiple files included <code>Templates.h</code>, each of those files would have added the instantiation time of <code>LargeValue()</code> to the total build time. By moving the definition of <code>LargeValue()</code> to a dedicated source file, we can minimize our build time. </span></p>
<p><span style="font-size: 10pt;"><b><a href="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/pen.svg"><img decoding="async" class="wp-image-33988 alignleft" role="img" src="https://devblogs.microsoft.com/cppblog/wp-content/uploads/sites/9/2024/04/pen.svg" alt="" width="50" height="50" /></a>Try For Yourself:</b> Create two more source files in the same C++ console application project we’ve been using above (you should now have four source files in your project). Have all files include the original <code>Templates.h</code> (before our optimizations). Run build insights on the project. Now apply the optimizations from the previous example above and ensure only <code>LargeValue.cpp</code> has the definition of <code>LargeValue()</code>. You should see the build time is decreased by 75%.  </span></p>
<h3 aria-level="2" aria-level="2" id="costs-associated-with-templates-view"><span style="color: #800080;">Costs Associated with Templates View </span></h3>
<p><span data-contrast="auto">To collect the template instantiation information from your build, Build Insights utilizes a higher level of data collection than necessary for the other views in Build Insights. It also must perform additional post processing on the data collected. These two factors increase how long it takes Build Insights to generate a report; larger C++ projects will notice this difference more than smaller projects. Due to this increase in time, Templates View is turned off by default.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:278}"> </span></p>
<h3 aria-level="2" aria-level="2" id="thank-you"><span style="color: #800080;">Thank You! </span></h3>
<p><span data-contrast="auto">Thank you to Xiang Fan for adding ETW events to the MSVC compiler so we can track template data. Thank you to Kevin Cadieux for integrating the template ETW events into the Build Insights trace collection. Thank you to Nelson Troncoso for leading the development and design of Build Insights in Visual Studio. Thank you to our former C++ intern and my mentee Hanah Chandley, for her help on adding the Templates View into Visual Studio. Thank you to our developer community, especially our game studio partners, for their suggestions. We are constantly striving to improve Build Insights for Visual Studio and your comments and suggestions help us to do this. If you’d like to share your ideas or experience with us you can comment below, find us on Twitter (</span><a href="https://twitter.com/visualc"><span data-contrast="none">@VisualC</span></a><span data-contrast="none">) </span><span data-contrast="auto">or email us at</span> <a href="mailto:visualcpp@microsoft.com"><span data-contrast="none">visualcpp@microsoft.com</span></a><span data-contrast="auto">. To open a bug, please see</span> <a href="https://developercommunity.visualstudio.com/report?space=8&amp;entry=problem"><span data-contrast="none">Visual Studio Feedback</span></a><span data-contrast="none">.</span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335557856&quot;:16777215,&quot;335559739&quot;:240,&quot;335559740&quot;:278}"> </span></p>
<p><span data-contrast="auto">Check out our previous blog posts about Build Insights for Visual Studio: </span><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:278}"> </span></p>
<p><a href="https://devblogs.microsoft.com/cppblog/build-insights-now-available-in-visual-studio-2022/#getting-started"><span data-contrast="none">Build Insights Now Available in Visual Studio 2022 &#8211; C++ Team Blog (microsoft.com)</span></a><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:278}"> </span></p>
<p><a href="https://devblogs.microsoft.com/cppblog/functions-view-for-build-insights-in-visual-studio-2022-17-8/"><span data-contrast="none">Functions View for Build Insights in Visual Studio 2022 17.8 &#8211; C++ Team Blog (microsoft.com)</span></a><span data-ccp-props="{&quot;201341983&quot;:0,&quot;335559739&quot;:160,&quot;335559740&quot;:278}"> </span></p>
<p>The post <a href="https://devblogs.microsoft.com/cppblog/templates-view-for-build-insights-in-visual-studio-2/">Templates View for Build Insights in Visual Studio </a> appeared first on <a href="https://devblogs.microsoft.com/cppblog">C++ Team Blog</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://devblogs.microsoft.com/cppblog/templates-view-for-build-insights-in-visual-studio-2/feed/</wfw:commentRss>
			<slash:comments>1</slash:comments>
		
		
			</item>
		<item>
		<title>MSVC Address Sanitizer adoption in .NET’s CoreCLR</title>
		<link>https://devblogs.microsoft.com/cppblog/msvc-address-sanitizer-adoption-in-nets-coreclr/</link>
					<comments>https://devblogs.microsoft.com/cppblog/msvc-address-sanitizer-adoption-in-nets-coreclr/#comments</comments>
		
		<dc:creator><![CDATA[Zachary Johnson]]></dc:creator>
		<pubDate>Fri, 12 Apr 2024 19:39:12 +0000</pubDate>
				<category><![CDATA[C++]]></category>
		<category><![CDATA[Diagnostics]]></category>
		<guid isPermaLink="false">https://devblogs.microsoft.com/cppblog/?p=33957</guid>

					<description><![CDATA[<p>Collaboration to improve the reliability and security of .NET, from the perspective of an MSVC Address Sanitizer Developer<br />
Introduction<br />
.NET (on GitHub) is a cross-platform, open-source, and general-purpose development platform with widespread adoption. A core component of .NET is the Core Common Language Runtime (CoreCLR),</p>
<p>The post <a href="https://devblogs.microsoft.com/cppblog/msvc-address-sanitizer-adoption-in-nets-coreclr/">MSVC Address Sanitizer adoption in .NET’s CoreCLR</a> appeared first on <a href="https://devblogs.microsoft.com/cppblog">C++ Team Blog</a>.</p>
]]></description>
										<content:encoded><![CDATA[<p>Collaboration to improve the reliability and security of .NET, from the perspective of an MSVC Address Sanitizer Developer</p>
<h1 id="introduction">Introduction</h1>
<p>.NET (<a href="https://github.com/dotnet/runtime/">on GitHub</a>) is a cross-platform, open-source, and general-purpose development platform with widespread adoption. A core component of .NET is the Core Common Language Runtime (CoreCLR), which provides services such as memory management, exception handling, threading, and interoperability with native code. It is used by millions of developers across multiple platforms, including Windows, Linux, and Mac OSx.</p>
<p>The CoreCLR is implemented in native code, C and C++, and is a complex performance-critical system that interacts with various components, such as the operating system, the native libraries, and managed code. As such, it is susceptible to memory errors such as buffer overflows, use-after-frees, and memory leaks. These errors can cause crashes, undefined behavior, data corruption, security vulnerabilities, and performance degradation. It is crucial to detect and fix them as early as possible in development.</p>
<p>The MSVC Address Sanitizer (<a href="https://learn.microsoft.com/en-us/cpp/sanitizers/asan?view=msvc-170">ASan</a>) team was able to work with the CoreCLR team to help them consume and integrate ASan into their development workflow. ASan’s promise of zero false positive memory safety error reports increases security confidence in existing and legacy codebases, and CoreCLR was a great candidate for usage. As a bonus, since .NET is cross-platform, it can leverage ASan across Clang, GCC, and now also MSVC. In addition to this work, the native ahead-of-time (NativeAOT) runtime component is also sanitized.</p>
<h1 id="why-were-changes-required">Why were changes required?</h1>
<p>Previous work had been done to enable ASan for CoreCLR on GCC, but incompatibilities on Windows with build infrastructure, mixed configurations during testing, and run time issues precluded adoption. However, the effort for GCC was fruitful in finding memory safety errors, such as alloc-dealloc mismatches, buffer overruns, and use-after-scopes.</p>
<p>CoreCLR also contains some unique constraints on Windows that made ASan integration more challenging.</p>
<ol>
<li>It loads and unloads modules <strong>during</strong> runtime, which can interfere with ASan&#8217;s initialization and finalization.</li>
<li>It uses custom memory allocators and stack unwinding mechanisms, which can conflict with ASan’s tracking and reporting.</li>
<li>It has some code paths containing fast checked casts and tail calls, which originally caused ASan false positives.</li>
<li>It contains a Just-In-Time (JIT) layer that generates machine code, which can be tricky for ASan to navigate.</li>
</ol>
<p>Work to resolve some issues shared across all platforms was completed previously. However, for CoreCLR on Windows, both build and run time changes were required from the ASan team before adoption could take place.</p>
<h1 id="what-changed-in-msvc-asan">What changed in MSVC ASan</h1>
<p>A significant barrier to entry for several potential consumers of ASan on Windows was the different configurations and consuming debug vs release and dynamic vs statically linked libraries. This problem was addressed by creating a single always-dynamically-linked library that is used as the one source of truth for the application’s memory state. You can read more about the library change in the blog post <a href="https://devblogs.microsoft.com/cppblog/msvc-address-sanitizer-one-dll-for-all-runtime-configurations/">here</a>. This was also a requirement for ASan adoption in CoreCLR.</p>
<p>Summary of changes:</p>
<ul>
<li>Annotate allocations that happen prior to when ASan begins tracking the allocations to prevent false positive reports.</li>
<li>Intercept AddVectoredExceptionHandler and RemoveVectoredExceptionHandler on x64 to prevent spurious AccessViolationExceptions. This is necessary due to the shadow memory implementation on x64, which makes use of an on-demand mapping scheme which uses an exception handler to map shadow memory.</li>
<li>Correct an issue regarding ODR (One Definition Rule) violations for global variables of the same size in separate DLLs (Dynamic Link Libraries).</li>
<li>Support for weak symbols to allow the usage of ASan interface functions.</li>
<li>Suppress ASan communication with debuggers to avoid being caught by CoreCLR’s exception handler.</li>
</ul>
<h1 id="what-changed-in-coreclr">What changed in CoreCLR</h1>
<p>After appropriate changes were made from the ASan side, some changes were necessary to avoid build time errors, run time errors, and false positives on the CoreCLR side:</p>
<ul>
<li>Build infrastructure changes were required to have distinct sanitized and unsanitized component builds to test individual components one at a time, and then later all together. Most of those changes can be seen <a href="https://github.com/dotnet/runtime/pull/74623/files#diff-5158a979b64d41ef8f50b266afbd32c3434e5409b293651f7da5e41b98c2cc02">here</a>.</li>
<li>The <code>__asan_handle_no_return</code> function was inserted into several exception handling code paths to unpoison the stack memory and frames to correctly identify stack-use-after-scope and stack-use-after-return when using a sanitized CoreCLR.</li>
<li>The final test, configuration, and enablement of ASan pull request can be viewed <a href="https://github.com/dotnet/runtime/pull/95758">here</a>.</li>
</ul>
<p>After the changes were made, a <a href="https://dev.azure.com/dnceng-public/public/_build?definitionId=243&amp;_a=summary">weekly pipeline</a> run was created. The overall pipeline stability is still work in progress, but the <a href="https://dev.azure.com/dnceng-public/public/_build/results?buildId=608098&amp;view=logs&amp;j=943d8489-b13a-562a-30e1-90495a314d97">windows-x64 Checked CoreCLR_RuntimeTests</a> and <a href="https://dev.azure.com/dnceng-public/public/_build/results?buildId=608098&amp;view=logs&amp;j=62cc0a81-1f10-51a9-aa4f-cd7cddcf5989">windows-x64 release NativeAOT</a> steps are the important jobs related to this post. Since the project is so large, and the build and test steps take a significant amount of time already, the decision was to run on a weekly cadence. This prevents hindering code velocity while also providing useful feedback to bisect memory safety errors as they appear. It is important to continue to monitor these results after enabling ASan in projects to not regress memory safety metrics. Much of the work done by both teams was already completed before the release of Visual Studio 2022 17.8, but until the CI infrastructure for .NET could consume the changes in an official release, they were blocked.</p>
<p>Special thanks to Jeremy Koritzinsky and the CoreCLR team for their hard work and collaboration!</p>
<h1 id="call-to-action">Call to action</h1>
<p>We’d love for you to download Visual Studio and give the Address Sanitizer a try. As always, we welcome your feedback. We can be reached via the comments below. If you encounter other problems with MSVC or have a suggestion for Visual Studio please let us know through <a href="https://learn.microsoft.com/en-us/previous-versions/visualstudio/visual-studio-2017/ide/how-to-report-a-problem-with-visual-studio?view=vs-2017">Help &gt; Send Feedback &gt; Report A Problem / Provide a Suggestion in the product</a>, or via <a href="https://developercommunity.visualstudio.com/topics/C%2B%2B.html">Developer Community</a>.</p>
<p>&nbsp;</p>
<p>The post <a href="https://devblogs.microsoft.com/cppblog/msvc-address-sanitizer-adoption-in-nets-coreclr/">MSVC Address Sanitizer adoption in .NET’s CoreCLR</a> appeared first on <a href="https://devblogs.microsoft.com/cppblog">C++ Team Blog</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://devblogs.microsoft.com/cppblog/msvc-address-sanitizer-adoption-in-nets-coreclr/feed/</wfw:commentRss>
			<slash:comments>2</slash:comments>
		
		
			</item>
	</channel>
</rss>
